diff --git a/dist/cl.cjs b/dist/cl.cjs
index 083642996ff4e0df5871d04d974abd977eb99cc2..acba199f5aacae1b066bc097b9e696eb171cc08d 100755
--- a/dist/cl.cjs
+++ b/dist/cl.cjs
@@ -49,6 +49,6 @@
  * Copyright (c) 2014-present, Jon Schlinkert.
  * Licensed under the MIT License.
  */const YD=me.default,Pr=zD,Lr=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),qD=t=>e=>t===!0?Number(e):String(e),Vt=t=>typeof t=="number"||typeof t=="string"&&t!=="",ve=t=>Number.isInteger(+t),zt=t=>{let e=`${t}`,u=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++u]==="0";);return u>0},XD=(t,e,u)=>typeof t=="string"||typeof e=="string"?!0:u.stringify===!0,QD=(t,e,u)=>{if(e>0){let r=t[0]==="-"?"-":"";r&&(t=t.slice(1)),t=r+t.padStart(r?e-1:e,"0")}return u===!1?String(t):t},Ir=(t,e)=>{let u=t[0]==="-"?"-":"";for(u&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return u?"-"+t:t},ZD=(t,e)=>{t.negatives.sort((i,D)=>i<D?-1:i>D?1:0),t.positives.sort((i,D)=>i<D?-1:i>D?1:0);let u=e.capture?"":"?:",r="",n="",s;return t.positives.length&&(r=t.positives.join("|")),t.negatives.length&&(n=`-(${u}${t.negatives.join("|")})`),r&&n?s=`${r}|${n}`:s=r||n,e.wrap?`(${u}${s})`:s},kr=(t,e,u,r)=>{if(u)return Pr(t,e,{wrap:!1,...r});let n=String.fromCharCode(t);if(t===e)return n;let s=String.fromCharCode(e);return`[${n}-${s}]`},Mr=(t,e,u)=>{if(Array.isArray(t)){let r=u.wrap===!0,n=u.capture?"":"?:";return r?`(${n}${t.join("|")})`:t.join("|")}return Pr(t,e,u)},Wr=(...t)=>new RangeError("Invalid range arguments: "+YD.inspect(...t)),Gr=(t,e,u)=>{if(u.strictRanges===!0)throw Wr([t,e]);return[]},JD=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},eo=(t,e,u=1,r={})=>{let n=Number(t),s=Number(e);if(!Number.isInteger(n)||!Number.isInteger(s)){if(r.strictRanges===!0)throw Wr([t,e]);return[]}n===0&&(n=0),s===0&&(s=0);let i=n>s,D=String(t),o=String(e),a=String(u);u=Math.max(Math.abs(u),1);let c=zt(D)||zt(o)||zt(a),f=c?Math.max(D.length,o.length,a.length):0,l=c===!1&&XD(t,e,r)===!1,p=r.transform||qD(l);if(r.toRegex&&u===1)return kr(Ir(t,f),Ir(e,f),!0,r);let C={negatives:[],positives:[]},F=H=>C[H<0?"negatives":"positives"].push(Math.abs(H)),A=[],B=0;for(;i?n>=s:n<=s;)r.toRegex===!0&&u>1?F(n):A.push(QD(p(n,B),f,l)),n=i?n-u:n+u,B++;return r.toRegex===!0?u>1?ZD(C,r):Mr(A,null,{wrap:!1,...r}):A},to=(t,e,u=1,r={})=>{if(!ve(t)&&t.length>1||!ve(e)&&e.length>1)return Gr(t,e,r);let n=r.transform||(l=>String.fromCharCode(l)),s=`${t}`.charCodeAt(0),i=`${e}`.charCodeAt(0),D=s>i,o=Math.min(s,i),a=Math.max(s,i);if(r.toRegex&&u===1)return kr(o,a,!1,r);let c=[],f=0;for(;D?s>=i:s<=i;)c.push(n(s,f)),s=D?s-u:s+u,f++;return r.toRegex===!0?Mr(c,null,{wrap:!1,options:r}):c},Ze=(t,e,u,r={})=>{if(e==null&&Vt(t))return[t];if(!Vt(t)||!Vt(e))return Gr(t,e,r);if(typeof u=="function")return Ze(t,e,1,{transform:u});if(Lr(u))return Ze(t,e,0,u);let n={...r};return n.capture===!0&&(n.wrap=!0),u=u||n.step||1,ve(u)?ve(t)&&ve(e)?eo(t,e,u,n):to(t,e,Math.max(Math.abs(u),1),n):u!=null&&!Lr(u)?JD(u,n):Ze(t,e,1,u)};var jr=Ze;const uo=jr,Ur=Qe,ro=(t,e={})=>{let u=(r,n={})=>{let s=Ur.isInvalidBrace(n),i=r.invalid===!0&&e.escapeInvalid===!0,D=s===!0||i===!0,o=e.escapeInvalid===!0?"\\":"",a="";if(r.isOpen===!0||r.isClose===!0)return o+r.value;if(r.type==="open")return D?o+r.value:"(";if(r.type==="close")return D?o+r.value:")";if(r.type==="comma")return r.prev.type==="comma"?"":D?r.value:"|";if(r.value)return r.value;if(r.nodes&&r.ranges>0){let c=Ur.reduce(r.nodes),f=uo(...c,{...e,wrap:!1,toRegex:!0});if(f.length!==0)return c.length>1&&f.length>1?`(${f})`:f}if(r.nodes)for(let c of r.nodes)a+=u(c,r);return a};return u(t)};var no=ro;const so=jr,Kr=Ut,Ce=Qe,le=(t="",e="",u=!1)=>{let r=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return u?Ce.flatten(e).map(n=>`{${n}}`):e;for(let n of t)if(Array.isArray(n))for(let s of n)r.push(le(s,e,u));else for(let s of e)u===!0&&typeof s=="string"&&(s=`{${s}}`),r.push(Array.isArray(s)?le(n,s,u):n+s);return Ce.flatten(r)},io=(t,e={})=>{let u=e.rangeLimit===void 0?1e3:e.rangeLimit,r=(n,s={})=>{n.queue=[];let i=s,D=s.queue;for(;i.type!=="brace"&&i.type!=="root"&&i.parent;)i=i.parent,D=i.queue;if(n.invalid||n.dollar){D.push(le(D.pop(),Kr(n,e)));return}if(n.type==="brace"&&n.invalid!==!0&&n.nodes.length===2){D.push(le(D.pop(),["{}"]));return}if(n.nodes&&n.ranges>0){let f=Ce.reduce(n.nodes);if(Ce.exceedsLimit(...f,e.step,u))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let l=so(...f,e);l.length===0&&(l=Kr(n,e)),D.push(le(D.pop(),l)),n.nodes=[];return}let o=Ce.encloseBrace(n),a=n.queue,c=n;for(;c.type!=="brace"&&c.type!=="root"&&c.parent;)c=c.parent,a=c.queue;for(let f=0;f<n.nodes.length;f++){let l=n.nodes[f];if(l.type==="comma"&&n.type==="brace"){f===1&&a.push(""),a.push("");continue}if(l.type==="close"){D.push(le(D.pop(),a,o));continue}if(l.value&&l.type!=="open"){a.push(le(a.pop(),l.value));continue}l.nodes&&r(l,n)}return a};return Ce.flatten(r(t))};var Do=io,oo={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
-`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"};const ao=Ut,{MAX_LENGTH:Vr,CHAR_BACKSLASH:Yt,CHAR_BACKTICK:lo,CHAR_COMMA:co,CHAR_DOT:fo,CHAR_LEFT_PARENTHESES:ho,CHAR_RIGHT_PARENTHESES:Eo,CHAR_LEFT_CURLY_BRACE:po,CHAR_RIGHT_CURLY_BRACE:Co,CHAR_LEFT_SQUARE_BRACKET:zr,CHAR_RIGHT_SQUARE_BRACKET:Yr,CHAR_DOUBLE_QUOTE:Fo,CHAR_SINGLE_QUOTE:go,CHAR_NO_BREAK_SPACE:_o,CHAR_ZERO_WIDTH_NOBREAK_SPACE:mo}=oo,Ao=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let u=e||{},r=typeof u.maxLength=="number"?Math.min(Vr,u.maxLength):Vr;if(t.length>r)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${r})`);let n={type:"root",input:t,nodes:[]},s=[n],i=n,D=n,o=0,a=t.length,c=0,f=0,l;const p=()=>t[c++],C=F=>{if(F.type==="text"&&D.type==="dot"&&(D.type="text"),D&&D.type==="text"&&F.type==="text"){D.value+=F.value;return}return i.nodes.push(F),F.parent=i,F.prev=D,D=F,F};for(C({type:"bos"});c<a;)if(i=s[s.length-1],l=p(),!(l===mo||l===_o)){if(l===Yt){C({type:"text",value:(e.keepEscaping?l:"")+p()});continue}if(l===Yr){C({type:"text",value:"\\"+l});continue}if(l===zr){o++;let F;for(;c<a&&(F=p());){if(l+=F,F===zr){o++;continue}if(F===Yt){l+=p();continue}if(F===Yr&&(o--,o===0))break}C({type:"text",value:l});continue}if(l===ho){i=C({type:"paren",nodes:[]}),s.push(i),C({type:"text",value:l});continue}if(l===Eo){if(i.type!=="paren"){C({type:"text",value:l});continue}i=s.pop(),C({type:"text",value:l}),i=s[s.length-1];continue}if(l===Fo||l===go||l===lo){let F=l,A;for(e.keepQuotes!==!0&&(l="");c<a&&(A=p());){if(A===Yt){l+=A+p();continue}if(A===F){e.keepQuotes===!0&&(l+=A);break}l+=A}C({type:"text",value:l});continue}if(l===po){f++;let A={type:"brace",open:!0,close:!1,dollar:D.value&&D.value.slice(-1)==="$"||i.dollar===!0,depth:f,commas:0,ranges:0,nodes:[]};i=C(A),s.push(i),C({type:"open",value:l});continue}if(l===Co){if(i.type!=="brace"){C({type:"text",value:l});continue}let F="close";i=s.pop(),i.close=!0,C({type:F,value:l}),f--,i=s[s.length-1];continue}if(l===co&&f>0){if(i.ranges>0){i.ranges=0;let F=i.nodes.shift();i.nodes=[F,{type:"text",value:ao(i)}]}C({type:"comma",value:l}),i.commas++;continue}if(l===fo&&f>0&&i.commas===0){let F=i.nodes;if(f===0||F.length===0){C({type:"text",value:l});continue}if(D.type==="dot"){if(i.range=[],D.value+=l,D.type="range",i.nodes.length!==3&&i.nodes.length!==5){i.invalid=!0,i.ranges=0,D.type="text";continue}i.ranges++,i.args=[];continue}if(D.type==="range"){F.pop();let A=F[F.length-1];A.value+=D.value+l,D=A,i.ranges--;continue}C({type:"dot",value:l});continue}C({type:"text",value:l})}do if(i=s.pop(),i.type!=="root"){i.nodes.forEach(B=>{B.nodes||(B.type==="open"&&(B.isOpen=!0),B.type==="close"&&(B.isClose=!0),B.nodes||(B.type="text"),B.invalid=!0)});let F=s[s.length-1],A=F.nodes.indexOf(i);F.nodes.splice(A,1,...i.nodes)}while(s.length>0);return C({type:"eos"}),n};var yo=Ao;const qr=Ut,wo=no,Ro=Do,bo=yo,Y=(t,e={})=>{let u=[];if(Array.isArray(t))for(let r of t){let n=Y.create(r,e);Array.isArray(n)?u.push(...n):u.push(n)}else u=[].concat(Y.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(u=[...new Set(u)]),u};Y.parse=(t,e={})=>bo(t,e),Y.stringify=(t,e={})=>qr(typeof t=="string"?Y.parse(t,e):t,e),Y.compile=(t,e={})=>(typeof t=="string"&&(t=Y.parse(t,e)),wo(t,e)),Y.expand=(t,e={})=>{typeof t=="string"&&(t=Y.parse(t,e));let u=Ro(t,e);return e.noempty===!0&&(u=u.filter(Boolean)),e.nodupes===!0&&(u=[...new Set(u)]),u},Y.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?Y.compile(t,e):Y.expand(t,e);var vo=Y,Xr={exports:{}},Bo=["3dm","3ds","3g2","3gp","7z","a","aac","adp","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"];(function(t){t.exports=Bo})(Xr);const So=K.default,$o=Xr.exports,To=new Set($o);var xo=t=>To.has(So.extname(t).slice(1).toLowerCase()),Je={};(function(t){const{sep:e}=K.default,{platform:u}=process,r=mu.default;t.EV_ALL="all",t.EV_READY="ready",t.EV_ADD="add",t.EV_CHANGE="change",t.EV_ADD_DIR="addDir",t.EV_UNLINK="unlink",t.EV_UNLINK_DIR="unlinkDir",t.EV_RAW="raw",t.EV_ERROR="error",t.STR_DATA="data",t.STR_END="end",t.STR_CLOSE="close",t.FSEVENT_CREATED="created",t.FSEVENT_MODIFIED="modified",t.FSEVENT_DELETED="deleted",t.FSEVENT_MOVED="moved",t.FSEVENT_CLONED="cloned",t.FSEVENT_UNKNOWN="unknown",t.FSEVENT_TYPE_FILE="file",t.FSEVENT_TYPE_DIRECTORY="directory",t.FSEVENT_TYPE_SYMLINK="symlink",t.KEY_LISTENERS="listeners",t.KEY_ERR="errHandlers",t.KEY_RAW="rawEmitters",t.HANDLER_KEYS=[t.KEY_LISTENERS,t.KEY_ERR,t.KEY_RAW],t.DOT_SLASH=`.${e}`,t.BACK_SLASH_RE=/\\/g,t.DOUBLE_SLASH_RE=/\/\//,t.SLASH_OR_BACK_SLASH_RE=/[/\\]/,t.DOT_RE=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/,t.REPLACER_RE=/^\.[/\\]/,t.SLASH="/",t.SLASH_SLASH="//",t.BRACE_START="{",t.BANG="!",t.ONE_DOT=".",t.TWO_DOTS="..",t.STAR="*",t.GLOBSTAR="**",t.ROOT_GLOBSTAR="/**/*",t.SLASH_GLOBSTAR="/**",t.DIR_SUFFIX="Dir",t.ANYMATCH_OPTS={dot:!0},t.STRING_TYPE="string",t.FUNCTION_TYPE="function",t.EMPTY_STR="",t.EMPTY_FN=()=>{},t.IDENTITY_FN=n=>n,t.isWindows=u==="win32",t.isMacos=u==="darwin",t.isLinux=u==="linux",t.isIBMi=r.type()==="OS400"})(Je);const ue=De.default,L=K.default,{promisify:Be}=me.default,Oo=xo,{isWindows:No,isLinux:Ho,EMPTY_FN:Po,EMPTY_STR:Lo,KEY_LISTENERS:Fe,KEY_ERR:qt,KEY_RAW:Se,HANDLER_KEYS:Io,EV_CHANGE:et,EV_ADD:tt,EV_ADD_DIR:ko,EV_ERROR:Qr,STR_DATA:Mo,STR_END:Wo,BRACE_START:Go,STAR:jo}=Je,Uo="watch",Ko=Be(ue.open),Zr=Be(ue.stat),Vo=Be(ue.lstat),zo=Be(ue.close),Xt=Be(ue.realpath),Yo={lstat:Vo,stat:Zr},Qt=(t,e)=>{t instanceof Set?t.forEach(e):e(t)},$e=(t,e,u)=>{let r=t[e];r instanceof Set||(t[e]=r=new Set([r])),r.add(u)},qo=t=>e=>{const u=t[e];u instanceof Set?u.clear():delete t[e]},Te=(t,e,u)=>{const r=t[e];r instanceof Set?r.delete(u):r===u&&delete t[e]},Jr=t=>t instanceof Set?t.size===0:!t,ut=new Map;function en(t,e,u,r,n){const s=(i,D)=>{u(t),n(i,D,{watchedPath:t}),D&&t!==D&&rt(L.resolve(t,D),Fe,L.join(t,D))};try{return ue.watch(t,e,s)}catch(i){r(i)}}const rt=(t,e,u,r,n)=>{const s=ut.get(t);!s||Qt(s[e],i=>{i(u,r,n)})},Xo=(t,e,u,r)=>{const{listener:n,errHandler:s,rawEmitter:i}=r;let D=ut.get(e),o;if(!u.persistent)return o=en(t,u,n,s,i),o.close.bind(o);if(D)$e(D,Fe,n),$e(D,qt,s),$e(D,Se,i);else{if(o=en(t,u,rt.bind(null,e,Fe),s,rt.bind(null,e,Se)),!o)return;o.on(Qr,async a=>{const c=rt.bind(null,e,qt);if(D.watcherUnusable=!0,No&&a.code==="EPERM")try{const f=await Ko(t,"r");await zo(f),c(a)}catch{}else c(a)}),D={listeners:n,errHandlers:s,rawEmitters:i,watcher:o},ut.set(e,D)}return()=>{Te(D,Fe,n),Te(D,qt,s),Te(D,Se,i),Jr(D.listeners)&&(D.watcher.close(),ut.delete(e),Io.forEach(qo(D)),D.watcher=void 0,Object.freeze(D))}},Zt=new Map,Qo=(t,e,u,r)=>{const{listener:n,rawEmitter:s}=r;let i=Zt.get(e);const D=i&&i.options;return D&&(D.persistent<u.persistent||D.interval>u.interval)&&(i.listeners,i.rawEmitters,ue.unwatchFile(e),i=void 0),i?($e(i,Fe,n),$e(i,Se,s)):(i={listeners:n,rawEmitters:s,options:u,watcher:ue.watchFile(e,u,(o,a)=>{Qt(i.rawEmitters,f=>{f(et,e,{curr:o,prev:a})});const c=o.mtimeMs;(o.size!==a.size||c>a.mtimeMs||c===0)&&Qt(i.listeners,f=>f(t,o))})},Zt.set(e,i)),()=>{Te(i,Fe,n),Te(i,Se,s),Jr(i.listeners)&&(Zt.delete(e),ue.unwatchFile(e),i.options=i.watcher=void 0,Object.freeze(i))}};class Zo{constructor(e){this.fsw=e,this._boundHandleError=u=>e._handleError(u)}_watchWithNodeFs(e,u){const r=this.fsw.options,n=L.dirname(e),s=L.basename(e);this.fsw._getWatchedDir(n).add(s);const D=L.resolve(e),o={persistent:r.persistent};u||(u=Po);let a;return r.usePolling?(o.interval=r.enableBinaryInterval&&Oo(s)?r.binaryInterval:r.interval,a=Qo(e,D,o,{listener:u,rawEmitter:this.fsw._emitRaw})):a=Xo(e,D,o,{listener:u,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw}),a}_handleFile(e,u,r){if(this.fsw.closed)return;const n=L.dirname(e),s=L.basename(e),i=this.fsw._getWatchedDir(n);let D=u;if(i.has(s))return;const o=async(c,f)=>{if(!!this.fsw._throttle(Uo,e,5)){if(!f||f.mtimeMs===0)try{const l=await Zr(e);if(this.fsw.closed)return;const p=l.atimeMs,C=l.mtimeMs;(!p||p<=C||C!==D.mtimeMs)&&this.fsw._emit(et,e,l),Ho&&D.ino!==l.ino?(this.fsw._closeFile(c),D=l,this.fsw._addPathCloser(c,this._watchWithNodeFs(e,o))):D=l}catch{this.fsw._remove(n,s)}else if(i.has(s)){const l=f.atimeMs,p=f.mtimeMs;(!l||l<=p||p!==D.mtimeMs)&&this.fsw._emit(et,e,f),D=f}}},a=this._watchWithNodeFs(e,o);if(!(r&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(e)){if(!this.fsw._throttle(tt,e,0))return;this.fsw._emit(tt,e,u)}return a}async _handleSymlink(e,u,r,n){if(this.fsw.closed)return;const s=e.fullPath,i=this.fsw._getWatchedDir(u);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let D;try{D=await Xt(r)}catch{return this.fsw._emitReady(),!0}return this.fsw.closed?void 0:(i.has(n)?this.fsw._symlinkPaths.get(s)!==D&&(this.fsw._symlinkPaths.set(s,D),this.fsw._emit(et,r,e.stats)):(i.add(n),this.fsw._symlinkPaths.set(s,D),this.fsw._emit(tt,r,e.stats)),this.fsw._emitReady(),!0)}if(this.fsw._symlinkPaths.has(s))return!0;this.fsw._symlinkPaths.set(s,!0)}_handleRead(e,u,r,n,s,i,D){if(e=L.join(e,Lo),!r.hasGlob&&(D=this.fsw._throttle("readdir",e,1e3),!D))return;const o=this.fsw._getWatchedDir(r.path),a=new Set;let c=this.fsw._readdirp(e,{fileFilter:f=>r.filterPath(f),directoryFilter:f=>r.filterDir(f),depth:0}).on(Mo,async f=>{if(this.fsw.closed){c=void 0;return}const l=f.path;let p=L.join(e,l);if(a.add(l),!(f.stats.isSymbolicLink()&&await this._handleSymlink(f,e,p,l))){if(this.fsw.closed){c=void 0;return}(l===n||!n&&!o.has(l))&&(this.fsw._incrReadyCount(),p=L.join(s,L.relative(s,p)),this._addToNodeFs(p,u,r,i+1))}}).on(Qr,this._boundHandleError);return new Promise(f=>c.once(Wo,()=>{if(this.fsw.closed){c=void 0;return}const l=D?D.clear():!1;f(),o.getChildren().filter(p=>p!==e&&!a.has(p)&&(!r.hasGlob||r.filterPath({fullPath:L.resolve(e,p)}))).forEach(p=>{this.fsw._remove(e,p)}),c=void 0,l&&this._handleRead(e,!1,r,n,s,i,D)}))}async _handleDir(e,u,r,n,s,i,D){const o=this.fsw._getWatchedDir(L.dirname(e)),a=o.has(L.basename(e));!(r&&this.fsw.options.ignoreInitial)&&!s&&!a&&(!i.hasGlob||i.globFilter(e))&&this.fsw._emit(ko,e,u),o.add(L.basename(e)),this.fsw._getWatchedDir(e);let c,f;const l=this.fsw.options.depth;if((l==null||n<=l)&&!this.fsw._symlinkPaths.has(D)){if(!s&&(await this._handleRead(e,r,i,s,e,n,c),this.fsw.closed))return;f=this._watchWithNodeFs(e,(p,C)=>{C&&C.mtimeMs===0||this._handleRead(p,!1,i,s,e,n,c)})}return f}async _addToNodeFs(e,u,r,n,s){const i=this.fsw._emitReady;if(this.fsw._isIgnored(e)||this.fsw.closed)return i(),!1;const D=this.fsw._getWatchHelpers(e,n);!D.hasGlob&&r&&(D.hasGlob=r.hasGlob,D.globFilter=r.globFilter,D.filterPath=o=>r.filterPath(o),D.filterDir=o=>r.filterDir(o));try{const o=await Yo[D.statMethod](D.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(D.watchPath,o))return i(),!1;const a=this.fsw.options.followSymlinks&&!e.includes(jo)&&!e.includes(Go);let c;if(o.isDirectory()){const f=L.resolve(e),l=a?await Xt(e):e;if(this.fsw.closed||(c=await this._handleDir(D.watchPath,o,u,n,s,D,l),this.fsw.closed))return;f!==l&&l!==void 0&&this.fsw._symlinkPaths.set(f,l)}else if(o.isSymbolicLink()){const f=a?await Xt(e):e;if(this.fsw.closed)return;const l=L.dirname(D.watchPath);if(this.fsw._getWatchedDir(l).add(D.watchPath),this.fsw._emit(tt,D.watchPath,o),c=await this._handleDir(l,o,u,n,e,D,f),this.fsw.closed)return;f!==void 0&&this.fsw._symlinkPaths.set(L.resolve(e),f)}else c=this._handleFile(D.watchPath,o,u);return i(),this.fsw._addPathCloser(e,c),!1}catch(o){if(this.fsw._handleError(o))return i(),e}}}var Jo=Zo,Jt={exports:{}};const eu=De.default,I=K.default,{promisify:tu}=me.default;let ge;try{ge=ot.require("fsevents")}catch(t){process.env.CHOKIDAR_PRINT_FSEVENTS_REQUIRE_ERROR&&console.error(t)}if(ge){const t=process.version.match(/v(\d+)\.(\d+)/);if(t&&t[1]&&t[2]){const e=Number.parseInt(t[1],10),u=Number.parseInt(t[2],10);e===8&&u<16&&(ge=void 0)}}const{EV_ADD:uu,EV_CHANGE:ea,EV_ADD_DIR:tn,EV_UNLINK:nt,EV_ERROR:ta,STR_DATA:ua,STR_END:ra,FSEVENT_CREATED:na,FSEVENT_MODIFIED:sa,FSEVENT_DELETED:ia,FSEVENT_MOVED:Da,FSEVENT_UNKNOWN:oa,FSEVENT_TYPE_FILE:aa,FSEVENT_TYPE_DIRECTORY:xe,FSEVENT_TYPE_SYMLINK:un,ROOT_GLOBSTAR:rn,DIR_SUFFIX:la,DOT_SLASH:nn,FUNCTION_TYPE:ru,EMPTY_FN:ca,IDENTITY_FN:fa}=Je,ha=t=>isNaN(t)?{}:{depth:t},nu=tu(eu.stat),da=tu(eu.lstat),sn=tu(eu.realpath),Ea={stat:nu,lstat:da},ce=new Map,pa=10,Ca=new Set([69888,70400,71424,72704,73472,131328,131840,262912]),Fa=(t,e)=>({stop:ge.watch(t,e)});function ga(t,e,u,r){let n=I.extname(e)?I.dirname(e):e;const s=I.dirname(n);let i=ce.get(n);_a(s)&&(n=s);const D=I.resolve(t),o=D!==e,a=(f,l,p)=>{o&&(f=f.replace(e,D)),(f===D||!f.indexOf(D+I.sep))&&u(f,l,p)};let c=!1;for(const f of ce.keys())if(e.indexOf(I.resolve(f)+I.sep)===0){n=f,i=ce.get(n),c=!0;break}return i||c?i.listeners.add(a):(i={listeners:new Set([a]),rawEmitter:r,watcher:Fa(n,(f,l)=>{if(!i.listeners.size)return;const p=ge.getInfo(f,l);i.listeners.forEach(C=>{C(f,l,p)}),i.rawEmitter(p.event,f,p)})},ce.set(n,i)),()=>{const f=i.listeners;if(f.delete(a),!f.size&&(ce.delete(n),i.watcher))return i.watcher.stop().then(()=>{i.rawEmitter=i.watcher=void 0,Object.freeze(i)})}}const _a=t=>{let e=0;for(const u of ce.keys())if(u.indexOf(t)===0&&(e++,e>=pa))return!0;return!1},ma=()=>ge&&ce.size<128,su=(t,e)=>{let u=0;for(;!t.indexOf(e)&&(t=I.dirname(t))!==e;)u++;return u},Dn=(t,e)=>t.type===xe&&e.isDirectory()||t.type===un&&e.isSymbolicLink()||t.type===aa&&e.isFile();class Aa{constructor(e){this.fsw=e}checkIgnored(e,u){const r=this.fsw._ignoredPaths;if(this.fsw._isIgnored(e,u))return r.add(e),u&&u.isDirectory()&&r.add(e+rn),!0;r.delete(e),r.delete(e+rn)}addOrChange(e,u,r,n,s,i,D,o){const a=s.has(i)?ea:uu;this.handleEvent(a,e,u,r,n,s,i,D,o)}async checkExists(e,u,r,n,s,i,D,o){try{const a=await nu(e);if(this.fsw.closed)return;Dn(D,a)?this.addOrChange(e,u,r,n,s,i,D,o):this.handleEvent(nt,e,u,r,n,s,i,D,o)}catch(a){a.code==="EACCES"?this.addOrChange(e,u,r,n,s,i,D,o):this.handleEvent(nt,e,u,r,n,s,i,D,o)}}handleEvent(e,u,r,n,s,i,D,o,a){if(!(this.fsw.closed||this.checkIgnored(u)))if(e===nt){const c=o.type===xe;(c||i.has(D))&&this.fsw._remove(s,D,c)}else{if(e===uu){if(o.type===xe&&this.fsw._getWatchedDir(u),o.type===un&&a.followSymlinks){const f=a.depth===void 0?void 0:su(r,n)+1;return this._addToFsEvents(u,!1,!0,f)}this.fsw._getWatchedDir(s).add(D)}const c=o.type===xe?e+la:e;this.fsw._emit(c,u),c===tn&&this._addToFsEvents(u,!1,!0)}}_watchWithFsEvents(e,u,r,n){if(this.fsw.closed||this.fsw._isIgnored(e))return;const s=this.fsw.options,D=ga(e,u,async(o,a,c)=>{if(this.fsw.closed||s.depth!==void 0&&su(o,u)>s.depth)return;const f=r(I.join(e,I.relative(e,o)));if(n&&!n(f))return;const l=I.dirname(f),p=I.basename(f),C=this.fsw._getWatchedDir(c.type===xe?f:l);if(Ca.has(a)||c.event===oa)if(typeof s.ignored===ru){let F;try{F=await nu(f)}catch{}if(this.fsw.closed||this.checkIgnored(f,F))return;Dn(c,F)?this.addOrChange(f,o,u,l,C,p,c,s):this.handleEvent(nt,f,o,u,l,C,p,c,s)}else this.checkExists(f,o,u,l,C,p,c,s);else switch(c.event){case na:case sa:return this.addOrChange(f,o,u,l,C,p,c,s);case ia:case Da:return this.checkExists(f,o,u,l,C,p,c,s)}},this.fsw._emitRaw);return this.fsw._emitReady(),D}async _handleFsEventsSymlink(e,u,r,n){if(!(this.fsw.closed||this.fsw._symlinkPaths.has(u))){this.fsw._symlinkPaths.set(u,!0),this.fsw._incrReadyCount();try{const s=await sn(e);if(this.fsw.closed)return;if(this.fsw._isIgnored(s))return this.fsw._emitReady();this.fsw._incrReadyCount(),this._addToFsEvents(s||e,i=>{let D=e;return s&&s!==nn?D=i.replace(s,e):i!==nn&&(D=I.join(e,i)),r(D)},!1,n)}catch(s){if(this.fsw._handleError(s))return this.fsw._emitReady()}}}emitAdd(e,u,r,n,s){const i=r(e),D=u.isDirectory(),o=this.fsw._getWatchedDir(I.dirname(i)),a=I.basename(i);D&&this.fsw._getWatchedDir(i),!o.has(a)&&(o.add(a),(!n.ignoreInitial||s===!0)&&this.fsw._emit(D?tn:uu,i,u))}initWatch(e,u,r,n){if(this.fsw.closed)return;const s=this._watchWithFsEvents(r.watchPath,I.resolve(e||r.watchPath),n,r.globFilter);this.fsw._addPathCloser(u,s)}async _addToFsEvents(e,u,r,n){if(this.fsw.closed)return;const s=this.fsw.options,i=typeof u===ru?u:fa,D=this.fsw._getWatchHelpers(e);try{const o=await Ea[D.statMethod](D.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(D.watchPath,o))throw null;if(o.isDirectory()){if(D.globFilter||this.emitAdd(i(e),o,i,s,r),n&&n>s.depth)return;this.fsw._readdirp(D.watchPath,{fileFilter:a=>D.filterPath(a),directoryFilter:a=>D.filterDir(a),...ha(s.depth-(n||0))}).on(ua,a=>{if(this.fsw.closed||a.stats.isDirectory()&&!D.filterPath(a))return;const c=I.join(D.watchPath,a.path),{fullPath:f}=a;if(D.followSymlinks&&a.stats.isSymbolicLink()){const l=s.depth===void 0?void 0:su(c,I.resolve(D.watchPath))+1;this._handleFsEventsSymlink(c,f,i,l)}else this.emitAdd(c,a.stats,i,s,r)}).on(ta,ca).on(ra,()=>{this.fsw._emitReady()})}else this.emitAdd(D.watchPath,o,i,s,r),this.fsw._emitReady()}catch(o){(!o||this.fsw._handleError(o))&&(this.fsw._emitReady(),this.fsw._emitReady())}if(s.persistent&&r!==!0)if(typeof u===ru)this.initWatch(void 0,e,D,i);else{let o;try{o=await sn(D.watchPath)}catch{}this.initWatch(o,e,D,i)}}}Jt.exports=Aa,Jt.exports.canUse=ma;const{EventEmitter:ya}=Pn.default,iu=De.default,v=K.default,{promisify:on}=me.default,wa=AD,Du=Wt.exports.default,Ra=ID,ou=vr,ba=vo,va=Ar,Ba=Jo,an=Jt.exports,{EV_ALL:au,EV_READY:Sa,EV_ADD:st,EV_CHANGE:Oe,EV_UNLINK:ln,EV_ADD_DIR:$a,EV_UNLINK_DIR:Ta,EV_RAW:xa,EV_ERROR:lu,STR_CLOSE:Oa,STR_END:Na,BACK_SLASH_RE:Ha,DOUBLE_SLASH_RE:cn,SLASH_OR_BACK_SLASH_RE:Pa,DOT_RE:La,REPLACER_RE:Ia,SLASH:cu,SLASH_SLASH:ka,BRACE_START:Ma,BANG:fu,ONE_DOT:fn,TWO_DOTS:Wa,GLOBSTAR:Ga,SLASH_GLOBSTAR:hu,ANYMATCH_OPTS:du,STRING_TYPE:Eu,FUNCTION_TYPE:ja,EMPTY_STR:pu,EMPTY_FN:Ua,isWindows:Ka,isMacos:Va,isIBMi:za}=Je,Ya=on(iu.stat),qa=on(iu.readdir),Cu=(t=[])=>Array.isArray(t)?t:[t],hn=(t,e=[])=>(t.forEach(u=>{Array.isArray(u)?hn(u,e):e.push(u)}),e),dn=t=>{const e=hn(Cu(t));if(!e.every(u=>typeof u===Eu))throw new TypeError(`Non-string provided as watch path: ${e}`);return e.map(pn)},En=t=>{let e=t.replace(Ha,cu),u=!1;for(e.startsWith(ka)&&(u=!0);e.match(cn);)e=e.replace(cn,cu);return u&&(e=cu+e),e},pn=t=>En(v.normalize(En(t))),Cn=(t=pu)=>e=>typeof e!==Eu?e:pn(v.isAbsolute(e)?e:v.join(t,e)),Xa=(t,e)=>v.isAbsolute(t)?t:t.startsWith(fu)?fu+v.join(e,t.slice(1)):v.join(e,t),q=(t,e)=>t[e]===void 0;class Qa{constructor(e,u){this.path=e,this._removeWatcher=u,this.items=new Set}add(e){const{items:u}=this;!u||e!==fn&&e!==Wa&&u.add(e)}async remove(e){const{items:u}=this;if(!u||(u.delete(e),u.size>0))return;const r=this.path;try{await qa(r)}catch{this._removeWatcher&&this._removeWatcher(v.dirname(r),v.basename(r))}}has(e){const{items:u}=this;if(!!u)return u.has(e)}getChildren(){const{items:e}=this;if(!!e)return[...e.values()]}dispose(){this.items.clear(),delete this.path,delete this._removeWatcher,delete this.items,Object.freeze(this)}}const Za="stat",Ja="lstat";class el{constructor(e,u,r,n){this.fsw=n,this.path=e=e.replace(Ia,pu),this.watchPath=u,this.fullWatchPath=v.resolve(u),this.hasGlob=u!==e,e===pu&&(this.hasGlob=!1),this.globSymlink=this.hasGlob&&r?void 0:!1,this.globFilter=this.hasGlob?Du(e,void 0,du):!1,this.dirParts=this.getDirParts(e),this.dirParts.forEach(s=>{s.length>1&&s.pop()}),this.followSymlinks=r,this.statMethod=r?Za:Ja}checkGlobSymlink(e){return this.globSymlink===void 0&&(this.globSymlink=e.fullParentDir===this.fullWatchPath?!1:{realPath:e.fullParentDir,linkPath:this.fullWatchPath}),this.globSymlink?e.fullPath.replace(this.globSymlink.realPath,this.globSymlink.linkPath):e.fullPath}entryPath(e){return v.join(this.watchPath,v.relative(this.watchPath,this.checkGlobSymlink(e)))}filterPath(e){const{stats:u}=e;if(u&&u.isSymbolicLink())return this.filterDir(e);const r=this.entryPath(e);return(this.hasGlob&&typeof this.globFilter===ja?this.globFilter(r):!0)&&this.fsw._isntIgnored(r,u)&&this.fsw._hasReadPermissions(u)}getDirParts(e){if(!this.hasGlob)return[];const u=[];return(e.includes(Ma)?ba.expand(e):[e]).forEach(n=>{u.push(v.relative(this.watchPath,n).split(Pa))}),u}filterDir(e){if(this.hasGlob){const u=this.getDirParts(this.checkGlobSymlink(e));let r=!1;this.unmatchedGlob=!this.dirParts.some(n=>n.every((s,i)=>(s===Ga&&(r=!0),r||!u[0][i]||Du(s,u[0][i],du))))}return!this.unmatchedGlob&&this.fsw._isntIgnored(this.entryPath(e),e.stats)}}class tl extends ya{constructor(e){super();const u={};e&&Object.assign(u,e),this._watched=new Map,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._symlinkPaths=new Map,this._streams=new Set,this.closed=!1,q(u,"persistent")&&(u.persistent=!0),q(u,"ignoreInitial")&&(u.ignoreInitial=!1),q(u,"ignorePermissionErrors")&&(u.ignorePermissionErrors=!1),q(u,"interval")&&(u.interval=100),q(u,"binaryInterval")&&(u.binaryInterval=300),q(u,"disableGlobbing")&&(u.disableGlobbing=!1),u.enableBinaryInterval=u.binaryInterval!==u.interval,q(u,"useFsEvents")&&(u.useFsEvents=!u.usePolling),an.canUse()||(u.useFsEvents=!1),q(u,"usePolling")&&!u.useFsEvents&&(u.usePolling=Va),za&&(u.usePolling=!0);const n=process.env.CHOKIDAR_USEPOLLING;if(n!==void 0){const o=n.toLowerCase();o==="false"||o==="0"?u.usePolling=!1:o==="true"||o==="1"?u.usePolling=!0:u.usePolling=!!o}const s=process.env.CHOKIDAR_INTERVAL;s&&(u.interval=Number.parseInt(s,10)),q(u,"atomic")&&(u.atomic=!u.usePolling&&!u.useFsEvents),u.atomic&&(this._pendingUnlinks=new Map),q(u,"followSymlinks")&&(u.followSymlinks=!0),q(u,"awaitWriteFinish")&&(u.awaitWriteFinish=!1),u.awaitWriteFinish===!0&&(u.awaitWriteFinish={});const i=u.awaitWriteFinish;i&&(i.stabilityThreshold||(i.stabilityThreshold=2e3),i.pollInterval||(i.pollInterval=100),this._pendingWrites=new Map),u.ignored&&(u.ignored=Cu(u.ignored));let D=0;this._emitReady=()=>{D++,D>=this._readyCount&&(this._emitReady=Ua,this._readyEmitted=!0,process.nextTick(()=>this.emit(Sa)))},this._emitRaw=(...o)=>this.emit(xa,...o),this._readyEmitted=!1,this.options=u,u.useFsEvents?this._fsEventsHandler=new an(this):this._nodeFsHandler=new Ba(this),Object.freeze(u)}add(e,u,r){const{cwd:n,disableGlobbing:s}=this.options;this.closed=!1;let i=dn(e);return n&&(i=i.map(D=>{const o=Xa(D,n);return s||!ou(D)?o:va(o)})),i=i.filter(D=>D.startsWith(fu)?(this._ignoredPaths.add(D.slice(1)),!1):(this._ignoredPaths.delete(D),this._ignoredPaths.delete(D+hu),this._userIgnored=void 0,!0)),this.options.useFsEvents&&this._fsEventsHandler?(this._readyCount||(this._readyCount=i.length),this.options.persistent&&(this._readyCount*=2),i.forEach(D=>this._fsEventsHandler._addToFsEvents(D))):(this._readyCount||(this._readyCount=0),this._readyCount+=i.length,Promise.all(i.map(async D=>{const o=await this._nodeFsHandler._addToNodeFs(D,!r,0,0,u);return o&&this._emitReady(),o})).then(D=>{this.closed||D.filter(o=>o).forEach(o=>{this.add(v.dirname(o),v.basename(u||o))})})),this}unwatch(e){if(this.closed)return this;const u=dn(e),{cwd:r}=this.options;return u.forEach(n=>{!v.isAbsolute(n)&&!this._closers.has(n)&&(r&&(n=v.join(r,n)),n=v.resolve(n)),this._closePath(n),this._ignoredPaths.add(n),this._watched.has(n)&&this._ignoredPaths.add(n+hu),this._userIgnored=void 0}),this}close(){if(this.closed)return this._closePromise;this.closed=!0,this.removeAllListeners();const e=[];return this._closers.forEach(u=>u.forEach(r=>{const n=r();n instanceof Promise&&e.push(n)})),this._streams.forEach(u=>u.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach(u=>u.dispose()),["closers","watched","streams","symlinkPaths","throttled"].forEach(u=>{this[`_${u}`].clear()}),this._closePromise=e.length?Promise.all(e).then(()=>{}):Promise.resolve(),this._closePromise}getWatched(){const e={};return this._watched.forEach((u,r)=>{const n=this.options.cwd?v.relative(this.options.cwd,r):r;e[n||fn]=u.getChildren().sort()}),e}emitWithAll(e,u){this.emit(...u),e!==lu&&this.emit(au,...u)}async _emit(e,u,r,n,s){if(this.closed)return;const i=this.options;Ka&&(u=v.normalize(u)),i.cwd&&(u=v.relative(i.cwd,u));const D=[e,u];s!==void 0?D.push(r,n,s):n!==void 0?D.push(r,n):r!==void 0&&D.push(r);const o=i.awaitWriteFinish;let a;if(o&&(a=this._pendingWrites.get(u)))return a.lastChange=new Date,this;if(i.atomic){if(e===ln)return this._pendingUnlinks.set(u,D),setTimeout(()=>{this._pendingUnlinks.forEach((c,f)=>{this.emit(...c),this.emit(au,...c),this._pendingUnlinks.delete(f)})},typeof i.atomic=="number"?i.atomic:100),this;e===st&&this._pendingUnlinks.has(u)&&(e=D[0]=Oe,this._pendingUnlinks.delete(u))}if(o&&(e===st||e===Oe)&&this._readyEmitted){const c=(f,l)=>{f?(e=D[0]=lu,D[1]=f,this.emitWithAll(e,D)):l&&(D.length>2?D[2]=l:D.push(l),this.emitWithAll(e,D))};return this._awaitWriteFinish(u,o.stabilityThreshold,e,c),this}if(e===Oe&&!this._throttle(Oe,u,50))return this;if(i.alwaysStat&&r===void 0&&(e===st||e===$a||e===Oe)){const c=i.cwd?v.join(i.cwd,u):u;let f;try{f=await Ya(c)}catch{}if(!f||this.closed)return;D.push(f)}return this.emitWithAll(e,D),this}_handleError(e){const u=e&&e.code;return e&&u!=="ENOENT"&&u!=="ENOTDIR"&&(!this.options.ignorePermissionErrors||u!=="EPERM"&&u!=="EACCES")&&this.emit(lu,e),e||this.closed}_throttle(e,u,r){this._throttled.has(e)||this._throttled.set(e,new Map);const n=this._throttled.get(e),s=n.get(u);if(s)return s.count++,!1;let i;const D=()=>{const a=n.get(u),c=a?a.count:0;return n.delete(u),clearTimeout(i),a&&clearTimeout(a.timeoutObject),c};i=setTimeout(D,r);const o={timeoutObject:i,clear:D,count:0};return n.set(u,o),o}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(e,u,r,n){let s,i=e;this.options.cwd&&!v.isAbsolute(e)&&(i=v.join(this.options.cwd,e));const D=new Date,o=a=>{iu.stat(i,(c,f)=>{if(c||!this._pendingWrites.has(e)){c&&c.code!=="ENOENT"&&n(c);return}const l=Number(new Date);a&&f.size!==a.size&&(this._pendingWrites.get(e).lastChange=l);const p=this._pendingWrites.get(e);l-p.lastChange>=u?(this._pendingWrites.delete(e),n(void 0,f)):s=setTimeout(o,this.options.awaitWriteFinish.pollInterval,f)})};this._pendingWrites.has(e)||(this._pendingWrites.set(e,{lastChange:D,cancelWait:()=>(this._pendingWrites.delete(e),clearTimeout(s),r)}),s=setTimeout(o,this.options.awaitWriteFinish.pollInterval))}_getGlobIgnored(){return[...this._ignoredPaths.values()]}_isIgnored(e,u){if(this.options.atomic&&La.test(e))return!0;if(!this._userIgnored){const{cwd:r}=this.options,n=this.options.ignored,s=n&&n.map(Cn(r)),i=Cu(s).filter(o=>typeof o===Eu&&!ou(o)).map(o=>o+hu),D=this._getGlobIgnored().map(Cn(r)).concat(s,i);this._userIgnored=Du(D,void 0,du)}return this._userIgnored([e,u])}_isntIgnored(e,u){return!this._isIgnored(e,u)}_getWatchHelpers(e,u){const r=u||this.options.disableGlobbing||!ou(e)?e:Ra(e),n=this.options.followSymlinks;return new el(e,r,n,this)}_getWatchedDir(e){this._boundRemove||(this._boundRemove=this._remove.bind(this));const u=v.resolve(e);return this._watched.has(u)||this._watched.set(u,new Qa(u,this._boundRemove)),this._watched.get(u)}_hasReadPermissions(e){if(this.options.ignorePermissionErrors)return!0;const r=(e&&Number.parseInt(e.mode,10))&511,n=Number.parseInt(r.toString(8)[0],10);return Boolean(4&n)}_remove(e,u,r){const n=v.join(e,u),s=v.resolve(n);if(r=r!=null?r:this._watched.has(n)||this._watched.has(s),!this._throttle("remove",n,100))return;!r&&!this.options.useFsEvents&&this._watched.size===1&&this.add(e,u,!0),this._getWatchedDir(n).getChildren().forEach(l=>this._remove(n,l));const o=this._getWatchedDir(e),a=o.has(u);o.remove(u),this._symlinkPaths.has(s)&&this._symlinkPaths.delete(s);let c=n;if(this.options.cwd&&(c=v.relative(this.options.cwd,n)),this.options.awaitWriteFinish&&this._pendingWrites.has(c)&&this._pendingWrites.get(c).cancelWait()===st)return;this._watched.delete(n),this._watched.delete(s);const f=r?Ta:ln;a&&!this._isIgnored(n)&&this._emit(f,n),this.options.useFsEvents||this._closePath(n)}_closePath(e){this._closeFile(e);const u=v.dirname(e);this._getWatchedDir(u).remove(v.basename(e))}_closeFile(e){const u=this._closers.get(e);!u||(u.forEach(r=>r()),this._closers.delete(e))}_addPathCloser(e,u){if(!u)return;let r=this._closers.get(e);r||(r=[],this._closers.set(e,r)),r.push(u)}_readdirp(e,u){if(this.closed)return;const r={type:au,alwaysStat:!0,lstat:!0,...u};let n=wa(e,r);return this._streams.add(n),n.once(Oa,()=>{n=void 0}),n.once(Na,()=>{n&&(this._streams.delete(n),n=void 0)}),n}}const ul=(t,e)=>{const u=new tl(e);return u.add(t),u};var rl=ul;const Fu=(t=!0)=>{let e=!1;return u=>{if(e||u==="unknown-flag")return!0;if(u==="argument")return e=!0,t}};function Fn(t,e=process.argv.slice(2)){return yu(t,e,{ignore:Fu()}),e}let fe=!0;const _e=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let gn=0;if(_e.process&&_e.process.env&&_e.process.stdout){const{FORCE_COLOR:t,NODE_DISABLE_COLORS:e,TERM:u}=_e.process.env;e||t==="0"?fe=!1:t==="1"?fe=!0:u==="dumb"?fe=!1:"CI"in _e.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(r=>r in _e.process.env)?fe=!0:fe=process.stdout.isTTY,fe&&(gn=u&&u.endsWith("-256color")?2:1)}let _n={enabled:fe,supportLevel:gn};function mn(t,e,u=1){const r=`\x1B[${t}m`,n=`\x1B[${e}m`,s=new RegExp(`\\x1b\\[${e}m`,"g");return i=>_n.enabled&&_n.supportLevel>=u?r+(""+i).replace(s,r)+n:""+i}const nl=mn(90,39),sl=mn(96,39),il=()=>new Date().toLocaleTimeString(),Dl=(...t)=>console.log(nl(il()),sl("[tsx]"),...t),ol="\x1Bc";function al(t,e){let u;return()=>{u&&clearTimeout(u),u=setTimeout(()=>t(),e)}}function ll(t){return t&&typeof t=="object"&&t.type==="dependency"}const An={noCache:{type:Boolean,description:"Disable caching",default:!1},tsconfig:{type:String,description:"Custom tsconfig.json path"},clearScreen:{type:Boolean,description:"Clearing the screen on rerun",default:!0},ignore:{type:[String],description:"Paths & globs to exclude from being watched"}},cl=ui({name:"watch",parameters:["<script path>"],flags:An,help:{description:"Run the script and watch for changes"},ignoreArgv:Fu(!1)},t=>{const e=Fn(An,process.argv.slice(3)),u={noCache:t.flags.noCache,tsconfigPath:t.flags.tsconfig,clearScreen:t.flags.clearScreen,ignore:t.flags.ignore,ipc:!0};let r;const n=al(()=>{r&&!r.killed&&r.exitCode===null&&r.kill(),r&&Dl("rerunning"),u.clearScreen&&process.stdout.write(ol),r=nr(e,u),r.on("message",o=>{if(ll(o)){const a=o.path.startsWith("file:")?gu.fileURLToPath(o.path):o.path;K.default.isAbsolute(a)&&D.add(a)}})},100);n();function s(o){process.exit(128+_u.constants.signals[o])}function i(o){r&&r.exitCode===null?(r.on("close",()=>s(o)),r.kill(o)):s(o)}process.once("SIGINT",i),process.once("SIGTERM",i);const D=rl(t._,{cwd:process.cwd(),ignoreInitial:!0,ignored:["**/.*/**","**/.*","**/{node_modules,bower_components,vendor}/**",...u.ignore],ignorePermissionErrors:!0}).on("all",n);process.stdin.on("data",n)}),yn={noCache:{type:Boolean,description:"Disable caching"},tsconfig:{type:String,description:"Custom tsconfig.json path"}};ti({name:"tsx",parameters:["[script path]"],commands:[cl],flags:{...yn,version:{type:Boolean,alias:"v",description:"Show version"},help:{type:Boolean,alias:"h",description:"Show help"}},help:!1,ignoreArgv:Fu()},t=>{t.flags.version?process.stdout.write(`tsx v${vn.version}
+`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"};const ao=Ut,{MAX_LENGTH:Vr,CHAR_BACKSLASH:Yt,CHAR_BACKTICK:lo,CHAR_COMMA:co,CHAR_DOT:fo,CHAR_LEFT_PARENTHESES:ho,CHAR_RIGHT_PARENTHESES:Eo,CHAR_LEFT_CURLY_BRACE:po,CHAR_RIGHT_CURLY_BRACE:Co,CHAR_LEFT_SQUARE_BRACKET:zr,CHAR_RIGHT_SQUARE_BRACKET:Yr,CHAR_DOUBLE_QUOTE:Fo,CHAR_SINGLE_QUOTE:go,CHAR_NO_BREAK_SPACE:_o,CHAR_ZERO_WIDTH_NOBREAK_SPACE:mo}=oo,Ao=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let u=e||{},r=typeof u.maxLength=="number"?Math.min(Vr,u.maxLength):Vr;if(t.length>r)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${r})`);let n={type:"root",input:t,nodes:[]},s=[n],i=n,D=n,o=0,a=t.length,c=0,f=0,l;const p=()=>t[c++],C=F=>{if(F.type==="text"&&D.type==="dot"&&(D.type="text"),D&&D.type==="text"&&F.type==="text"){D.value+=F.value;return}return i.nodes.push(F),F.parent=i,F.prev=D,D=F,F};for(C({type:"bos"});c<a;)if(i=s[s.length-1],l=p(),!(l===mo||l===_o)){if(l===Yt){C({type:"text",value:(e.keepEscaping?l:"")+p()});continue}if(l===Yr){C({type:"text",value:"\\"+l});continue}if(l===zr){o++;let F;for(;c<a&&(F=p());){if(l+=F,F===zr){o++;continue}if(F===Yt){l+=p();continue}if(F===Yr&&(o--,o===0))break}C({type:"text",value:l});continue}if(l===ho){i=C({type:"paren",nodes:[]}),s.push(i),C({type:"text",value:l});continue}if(l===Eo){if(i.type!=="paren"){C({type:"text",value:l});continue}i=s.pop(),C({type:"text",value:l}),i=s[s.length-1];continue}if(l===Fo||l===go||l===lo){let F=l,A;for(e.keepQuotes!==!0&&(l="");c<a&&(A=p());){if(A===Yt){l+=A+p();continue}if(A===F){e.keepQuotes===!0&&(l+=A);break}l+=A}C({type:"text",value:l});continue}if(l===po){f++;let A={type:"brace",open:!0,close:!1,dollar:D.value&&D.value.slice(-1)==="$"||i.dollar===!0,depth:f,commas:0,ranges:0,nodes:[]};i=C(A),s.push(i),C({type:"open",value:l});continue}if(l===Co){if(i.type!=="brace"){C({type:"text",value:l});continue}let F="close";i=s.pop(),i.close=!0,C({type:F,value:l}),f--,i=s[s.length-1];continue}if(l===co&&f>0){if(i.ranges>0){i.ranges=0;let F=i.nodes.shift();i.nodes=[F,{type:"text",value:ao(i)}]}C({type:"comma",value:l}),i.commas++;continue}if(l===fo&&f>0&&i.commas===0){let F=i.nodes;if(f===0||F.length===0){C({type:"text",value:l});continue}if(D.type==="dot"){if(i.range=[],D.value+=l,D.type="range",i.nodes.length!==3&&i.nodes.length!==5){i.invalid=!0,i.ranges=0,D.type="text";continue}i.ranges++,i.args=[];continue}if(D.type==="range"){F.pop();let A=F[F.length-1];A.value+=D.value+l,D=A,i.ranges--;continue}C({type:"dot",value:l});continue}C({type:"text",value:l})}do if(i=s.pop(),i.type!=="root"){i.nodes.forEach(B=>{B.nodes||(B.type==="open"&&(B.isOpen=!0),B.type==="close"&&(B.isClose=!0),B.nodes||(B.type="text"),B.invalid=!0)});let F=s[s.length-1],A=F.nodes.indexOf(i);F.nodes.splice(A,1,...i.nodes)}while(s.length>0);return C({type:"eos"}),n};var yo=Ao;const qr=Ut,wo=no,Ro=Do,bo=yo,Y=(t,e={})=>{let u=[];if(Array.isArray(t))for(let r of t){let n=Y.create(r,e);Array.isArray(n)?u.push(...n):u.push(n)}else u=[].concat(Y.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(u=[...new Set(u)]),u};Y.parse=(t,e={})=>bo(t,e),Y.stringify=(t,e={})=>qr(typeof t=="string"?Y.parse(t,e):t,e),Y.compile=(t,e={})=>(typeof t=="string"&&(t=Y.parse(t,e)),wo(t,e)),Y.expand=(t,e={})=>{typeof t=="string"&&(t=Y.parse(t,e));let u=Ro(t,e);return e.noempty===!0&&(u=u.filter(Boolean)),e.nodupes===!0&&(u=[...new Set(u)]),u},Y.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?Y.compile(t,e):Y.expand(t,e);var vo=Y,Xr={exports:{}},Bo=["3dm","3ds","3g2","3gp","7z","a","aac","adp","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"];(function(t){t.exports=Bo})(Xr);const So=K.default,$o=Xr.exports,To=new Set($o);var xo=t=>To.has(So.extname(t).slice(1).toLowerCase()),Je={};(function(t){const{sep:e}=K.default,{platform:u}=process,r=mu.default;t.EV_ALL="all",t.EV_READY="ready",t.EV_ADD="add",t.EV_CHANGE="change",t.EV_ADD_DIR="addDir",t.EV_UNLINK="unlink",t.EV_UNLINK_DIR="unlinkDir",t.EV_RAW="raw",t.EV_ERROR="error",t.STR_DATA="data",t.STR_END="end",t.STR_CLOSE="close",t.FSEVENT_CREATED="created",t.FSEVENT_MODIFIED="modified",t.FSEVENT_DELETED="deleted",t.FSEVENT_MOVED="moved",t.FSEVENT_CLONED="cloned",t.FSEVENT_UNKNOWN="unknown",t.FSEVENT_TYPE_FILE="file",t.FSEVENT_TYPE_DIRECTORY="directory",t.FSEVENT_TYPE_SYMLINK="symlink",t.KEY_LISTENERS="listeners",t.KEY_ERR="errHandlers",t.KEY_RAW="rawEmitters",t.HANDLER_KEYS=[t.KEY_LISTENERS,t.KEY_ERR,t.KEY_RAW],t.DOT_SLASH=`.${e}`,t.BACK_SLASH_RE=/\\/g,t.DOUBLE_SLASH_RE=/\/\//,t.SLASH_OR_BACK_SLASH_RE=/[/\\]/,t.DOT_RE=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/,t.REPLACER_RE=/^\.[/\\]/,t.SLASH="/",t.SLASH_SLASH="//",t.BRACE_START="{",t.BANG="!",t.ONE_DOT=".",t.TWO_DOTS="..",t.STAR="*",t.GLOBSTAR="**",t.ROOT_GLOBSTAR="/**/*",t.SLASH_GLOBSTAR="/**",t.DIR_SUFFIX="Dir",t.ANYMATCH_OPTS={dot:!0},t.STRING_TYPE="string",t.FUNCTION_TYPE="function",t.EMPTY_STR="",t.EMPTY_FN=()=>{},t.IDENTITY_FN=n=>n,t.isWindows=u==="win32",t.isMacos=u==="darwin",t.isLinux=u==="linux",t.isIBMi=r.type()==="OS400"})(Je);const ue=De.default,L=K.default,{promisify:Be}=me.default,Oo=xo,{isWindows:No,isLinux:Ho,EMPTY_FN:Po,EMPTY_STR:Lo,KEY_LISTENERS:Fe,KEY_ERR:qt,KEY_RAW:Se,HANDLER_KEYS:Io,EV_CHANGE:et,EV_ADD:tt,EV_ADD_DIR:ko,EV_ERROR:Qr,STR_DATA:Mo,STR_END:Wo,BRACE_START:Go,STAR:jo}=Je,Uo="watch",Ko=Be(ue.open),Zr=Be(ue.stat),Vo=Be(ue.lstat),zo=Be(ue.close),Xt=Be(ue.realpath),Yo={lstat:Vo,stat:Zr},Qt=(t,e)=>{t instanceof Set?t.forEach(e):e(t)},$e=(t,e,u)=>{let r=t[e];r instanceof Set||(t[e]=r=new Set([r])),r.add(u)},qo=t=>e=>{const u=t[e];u instanceof Set?u.clear():delete t[e]},Te=(t,e,u)=>{const r=t[e];r instanceof Set?r.delete(u):r===u&&delete t[e]},Jr=t=>t instanceof Set?t.size===0:!t,ut=new Map;function en(t,e,u,r,n){const s=(i,D)=>{u(t),n(i,D,{watchedPath:t}),D&&t!==D&&rt(L.resolve(t,D),Fe,L.join(t,D))};try{return ue.watch(t,e,s)}catch(i){r(i)}}const rt=(t,e,u,r,n)=>{const s=ut.get(t);!s||Qt(s[e],i=>{i(u,r,n)})},Xo=(t,e,u,r)=>{const{listener:n,errHandler:s,rawEmitter:i}=r;let D=ut.get(e),o;if(!u.persistent)return o=en(t,u,n,s,i),o.close.bind(o);if(D)$e(D,Fe,n),$e(D,qt,s),$e(D,Se,i);else{if(o=en(t,u,rt.bind(null,e,Fe),s,rt.bind(null,e,Se)),!o)return;o.on(Qr,async a=>{const c=rt.bind(null,e,qt);if(D.watcherUnusable=!0,No&&a.code==="EPERM")try{const f=await Ko(t,"r");await zo(f),c(a)}catch{}else c(a)}),D={listeners:n,errHandlers:s,rawEmitters:i,watcher:o},ut.set(e,D)}return()=>{Te(D,Fe,n),Te(D,qt,s),Te(D,Se,i),Jr(D.listeners)&&(D.watcher.close(),ut.delete(e),Io.forEach(qo(D)),D.watcher=void 0,Object.freeze(D))}},Zt=new Map,Qo=(t,e,u,r)=>{const{listener:n,rawEmitter:s}=r;let i=Zt.get(e);const D=i&&i.options;return D&&(D.persistent<u.persistent||D.interval>u.interval)&&(i.listeners,i.rawEmitters,ue.unwatchFile(e),i=void 0),i?($e(i,Fe,n),$e(i,Se,s)):(i={listeners:n,rawEmitters:s,options:u,watcher:ue.watchFile(e,u,(o,a)=>{Qt(i.rawEmitters,f=>{f(et,e,{curr:o,prev:a})});const c=o.mtimeMs;(o.size!==a.size||c>a.mtimeMs||c===0)&&Qt(i.listeners,f=>f(t,o))})},Zt.set(e,i)),()=>{Te(i,Fe,n),Te(i,Se,s),Jr(i.listeners)&&(Zt.delete(e),ue.unwatchFile(e),i.options=i.watcher=void 0,Object.freeze(i))}};class Zo{constructor(e){this.fsw=e,this._boundHandleError=u=>e._handleError(u)}_watchWithNodeFs(e,u){const r=this.fsw.options,n=L.dirname(e),s=L.basename(e);this.fsw._getWatchedDir(n).add(s);const D=L.resolve(e),o={persistent:r.persistent};u||(u=Po);let a;return r.usePolling?(o.interval=r.enableBinaryInterval&&Oo(s)?r.binaryInterval:r.interval,a=Qo(e,D,o,{listener:u,rawEmitter:this.fsw._emitRaw})):a=Xo(e,D,o,{listener:u,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw}),a}_handleFile(e,u,r){if(this.fsw.closed)return;const n=L.dirname(e),s=L.basename(e),i=this.fsw._getWatchedDir(n);let D=u;if(i.has(s))return;const o=async(c,f)=>{if(!!this.fsw._throttle(Uo,e,5)){if(!f||f.mtimeMs===0)try{const l=await Zr(e);if(this.fsw.closed)return;const p=l.atimeMs,C=l.mtimeMs;(!p||p<=C||C!==D.mtimeMs)&&this.fsw._emit(et,e,l),Ho&&D.ino!==l.ino?(this.fsw._closeFile(c),D=l,this.fsw._addPathCloser(c,this._watchWithNodeFs(e,o))):D=l}catch{this.fsw._remove(n,s)}else if(i.has(s)){const l=f.atimeMs,p=f.mtimeMs;(!l||l<=p||p!==D.mtimeMs)&&this.fsw._emit(et,e,f),D=f}}},a=this._watchWithNodeFs(e,o);if(!(r&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(e)){if(!this.fsw._throttle(tt,e,0))return;this.fsw._emit(tt,e,u)}return a}async _handleSymlink(e,u,r,n){if(this.fsw.closed)return;const s=e.fullPath,i=this.fsw._getWatchedDir(u);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let D;try{D=await Xt(r)}catch{return this.fsw._emitReady(),!0}return this.fsw.closed?void 0:(i.has(n)?this.fsw._symlinkPaths.get(s)!==D&&(this.fsw._symlinkPaths.set(s,D),this.fsw._emit(et,r,e.stats)):(i.add(n),this.fsw._symlinkPaths.set(s,D),this.fsw._emit(tt,r,e.stats)),this.fsw._emitReady(),!0)}if(this.fsw._symlinkPaths.has(s))return!0;this.fsw._symlinkPaths.set(s,!0)}_handleRead(e,u,r,n,s,i,D){if(e=L.join(e,Lo),!r.hasGlob&&(D=this.fsw._throttle("readdir",e,1e3),!D))return;const o=this.fsw._getWatchedDir(r.path),a=new Set;let c=this.fsw._readdirp(e,{fileFilter:f=>r.filterPath(f),directoryFilter:f=>r.filterDir(f),depth:0}).on(Mo,async f=>{if(this.fsw.closed){c=void 0;return}const l=f.path;let p=L.join(e,l);if(a.add(l),!(f.stats.isSymbolicLink()&&await this._handleSymlink(f,e,p,l))){if(this.fsw.closed){c=void 0;return}(l===n||!n&&!o.has(l))&&(this.fsw._incrReadyCount(),p=L.join(s,L.relative(s,p)),this._addToNodeFs(p,u,r,i+1))}}).on(Qr,this._boundHandleError);return new Promise(f=>c.once(Wo,()=>{if(this.fsw.closed){c=void 0;return}const l=D?D.clear():!1;f(),o.getChildren().filter(p=>p!==e&&!a.has(p)&&(!r.hasGlob||r.filterPath({fullPath:L.resolve(e,p)}))).forEach(p=>{this.fsw._remove(e,p)}),c=void 0,l&&this._handleRead(e,!1,r,n,s,i,D)}))}async _handleDir(e,u,r,n,s,i,D){const o=this.fsw._getWatchedDir(L.dirname(e)),a=o.has(L.basename(e));!(r&&this.fsw.options.ignoreInitial)&&!s&&!a&&(!i.hasGlob||i.globFilter(e))&&this.fsw._emit(ko,e,u),o.add(L.basename(e)),this.fsw._getWatchedDir(e);let c,f;const l=this.fsw.options.depth;if((l==null||n<=l)&&!this.fsw._symlinkPaths.has(D)){if(!s&&(await this._handleRead(e,r,i,s,e,n,c),this.fsw.closed))return;f=this._watchWithNodeFs(e,(p,C)=>{C&&C.mtimeMs===0||this._handleRead(p,!1,i,s,e,n,c)})}return f}async _addToNodeFs(e,u,r,n,s){const i=this.fsw._emitReady;if(this.fsw._isIgnored(e)||this.fsw.closed)return i(),!1;const D=this.fsw._getWatchHelpers(e,n);!D.hasGlob&&r&&(D.hasGlob=r.hasGlob,D.globFilter=r.globFilter,D.filterPath=o=>r.filterPath(o),D.filterDir=o=>r.filterDir(o));try{const o=await Yo[D.statMethod](D.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(D.watchPath,o))return i(),!1;const a=this.fsw.options.followSymlinks&&!e.includes(jo)&&!e.includes(Go);let c;if(o.isDirectory()){const f=L.resolve(e),l=a?await Xt(e):e;if(this.fsw.closed||(c=await this._handleDir(D.watchPath,o,u,n,s,D,l),this.fsw.closed))return;f!==l&&l!==void 0&&this.fsw._symlinkPaths.set(f,l)}else if(o.isSymbolicLink()){const f=a?await Xt(e):e;if(this.fsw.closed)return;const l=L.dirname(D.watchPath);if(this.fsw._getWatchedDir(l).add(D.watchPath),this.fsw._emit(tt,D.watchPath,o),c=await this._handleDir(l,o,u,n,e,D,f),this.fsw.closed)return;f!==void 0&&this.fsw._symlinkPaths.set(L.resolve(e),f)}else c=this._handleFile(D.watchPath,o,u);return i(),this.fsw._addPathCloser(e,c),!1}catch(o){if(this.fsw._handleError(o))return i(),e}}}var Jo=Zo,Jt={exports:{}};const eu=De.default,I=K.default,{promisify:tu}=me.default;let ge;try{ge=ot.require("fsevents")}catch(t){process.env.CHOKIDAR_PRINT_FSEVENTS_REQUIRE_ERROR&&console.error(t)}if(ge){const t=process.version.match(/v(\d+)\.(\d+)/);if(t&&t[1]&&t[2]){const e=Number.parseInt(t[1],10),u=Number.parseInt(t[2],10);e===8&&u<16&&(ge=void 0)}}const{EV_ADD:uu,EV_CHANGE:ea,EV_ADD_DIR:tn,EV_UNLINK:nt,EV_ERROR:ta,STR_DATA:ua,STR_END:ra,FSEVENT_CREATED:na,FSEVENT_MODIFIED:sa,FSEVENT_DELETED:ia,FSEVENT_MOVED:Da,FSEVENT_UNKNOWN:oa,FSEVENT_TYPE_FILE:aa,FSEVENT_TYPE_DIRECTORY:xe,FSEVENT_TYPE_SYMLINK:un,ROOT_GLOBSTAR:rn,DIR_SUFFIX:la,DOT_SLASH:nn,FUNCTION_TYPE:ru,EMPTY_FN:ca,IDENTITY_FN:fa}=Je,ha=t=>isNaN(t)?{}:{depth:t},nu=tu(eu.stat),da=tu(eu.lstat),sn=tu(eu.realpath),Ea={stat:nu,lstat:da},ce=new Map,pa=10,Ca=new Set([69888,70400,71424,72704,73472,131328,131840,262912]),Fa=(t,e)=>({stop:ge.watch(t,e)});function ga(t,e,u,r){let n=I.extname(e)?I.dirname(e):e;const s=I.dirname(n);let i=ce.get(n);_a(s)&&(n=s);const D=I.resolve(t),o=D!==e,a=(f,l,p)=>{o&&(f=f.replace(e,D)),(f===D||!f.indexOf(D+I.sep))&&u(f,l,p)};let c=!1;for(const f of ce.keys())if(e.indexOf(I.resolve(f)+I.sep)===0){n=f,i=ce.get(n),c=!0;break}return i||c?i.listeners.add(a):(i={listeners:new Set([a]),rawEmitter:r,watcher:Fa(n,(f,l)=>{if(!i.listeners.size)return;const p=ge.getInfo(f,l);i.listeners.forEach(C=>{C(f,l,p)}),i.rawEmitter(p.event,f,p)})},ce.set(n,i)),()=>{const f=i.listeners;if(f.delete(a),!f.size&&(ce.delete(n),i.watcher))return i.watcher.stop().then(()=>{i.rawEmitter=i.watcher=void 0,Object.freeze(i)})}}const _a=t=>{let e=0;for(const u of ce.keys())if(u.indexOf(t)===0&&(e++,e>=pa))return!0;return!1},ma=()=>ge&&ce.size<128,su=(t,e)=>{let u=0;for(;!t.indexOf(e)&&(t=I.dirname(t))!==e;)u++;return u},Dn=(t,e)=>t.type===xe&&e.isDirectory()||t.type===un&&e.isSymbolicLink()||t.type===aa&&e.isFile();class Aa{constructor(e){this.fsw=e}checkIgnored(e,u){const r=this.fsw._ignoredPaths;if(this.fsw._isIgnored(e,u))return r.add(e),u&&u.isDirectory()&&r.add(e+rn),!0;r.delete(e),r.delete(e+rn)}addOrChange(e,u,r,n,s,i,D,o){const a=s.has(i)?ea:uu;this.handleEvent(a,e,u,r,n,s,i,D,o)}async checkExists(e,u,r,n,s,i,D,o){try{const a=await nu(e);if(this.fsw.closed)return;Dn(D,a)?this.addOrChange(e,u,r,n,s,i,D,o):this.handleEvent(nt,e,u,r,n,s,i,D,o)}catch(a){a.code==="EACCES"?this.addOrChange(e,u,r,n,s,i,D,o):this.handleEvent(nt,e,u,r,n,s,i,D,o)}}handleEvent(e,u,r,n,s,i,D,o,a){if(!(this.fsw.closed||this.checkIgnored(u)))if(e===nt){const c=o.type===xe;(c||i.has(D))&&this.fsw._remove(s,D,c)}else{if(e===uu){if(o.type===xe&&this.fsw._getWatchedDir(u),o.type===un&&a.followSymlinks){const f=a.depth===void 0?void 0:su(r,n)+1;return this._addToFsEvents(u,!1,!0,f)}this.fsw._getWatchedDir(s).add(D)}const c=o.type===xe?e+la:e;this.fsw._emit(c,u),c===tn&&this._addToFsEvents(u,!1,!0)}}_watchWithFsEvents(e,u,r,n){if(this.fsw.closed||this.fsw._isIgnored(e))return;const s=this.fsw.options,D=ga(e,u,async(o,a,c)=>{if(this.fsw.closed||s.depth!==void 0&&su(o,u)>s.depth)return;const f=r(I.join(e,I.relative(e,o)));if(n&&!n(f))return;const l=I.dirname(f),p=I.basename(f),C=this.fsw._getWatchedDir(c.type===xe?f:l);if(Ca.has(a)||c.event===oa)if(typeof s.ignored===ru){let F;try{F=await nu(f)}catch{}if(this.fsw.closed||this.checkIgnored(f,F))return;Dn(c,F)?this.addOrChange(f,o,u,l,C,p,c,s):this.handleEvent(nt,f,o,u,l,C,p,c,s)}else this.checkExists(f,o,u,l,C,p,c,s);else switch(c.event){case na:case sa:return this.addOrChange(f,o,u,l,C,p,c,s);case ia:case Da:return this.checkExists(f,o,u,l,C,p,c,s)}},this.fsw._emitRaw);return this.fsw._emitReady(),D}async _handleFsEventsSymlink(e,u,r,n){if(!(this.fsw.closed||this.fsw._symlinkPaths.has(u))){this.fsw._symlinkPaths.set(u,!0),this.fsw._incrReadyCount();try{const s=await sn(e);if(this.fsw.closed)return;if(this.fsw._isIgnored(s))return this.fsw._emitReady();this.fsw._incrReadyCount(),this._addToFsEvents(s||e,i=>{let D=e;return s&&s!==nn?D=i.replace(s,e):i!==nn&&(D=I.join(e,i)),r(D)},!1,n)}catch(s){if(this.fsw._handleError(s))return this.fsw._emitReady()}}}emitAdd(e,u,r,n,s){const i=r(e),D=u.isDirectory(),o=this.fsw._getWatchedDir(I.dirname(i)),a=I.basename(i);D&&this.fsw._getWatchedDir(i),!o.has(a)&&(o.add(a),(!n.ignoreInitial||s===!0)&&this.fsw._emit(D?tn:uu,i,u))}initWatch(e,u,r,n){if(this.fsw.closed)return;const s=this._watchWithFsEvents(r.watchPath,I.resolve(e||r.watchPath),n,r.globFilter);this.fsw._addPathCloser(u,s)}async _addToFsEvents(e,u,r,n){if(this.fsw.closed)return;const s=this.fsw.options,i=typeof u===ru?u:fa,D=this.fsw._getWatchHelpers(e);try{const o=await Ea[D.statMethod](D.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(D.watchPath,o))throw null;if(o.isDirectory()){if(D.globFilter||this.emitAdd(i(e),o,i,s,r),n&&n>s.depth)return;this.fsw._readdirp(D.watchPath,{fileFilter:a=>D.filterPath(a),directoryFilter:a=>D.filterDir(a),...ha(s.depth-(n||0))}).on(ua,a=>{if(this.fsw.closed||a.stats.isDirectory()&&!D.filterPath(a))return;const c=I.join(D.watchPath,a.path),{fullPath:f}=a;if(D.followSymlinks&&a.stats.isSymbolicLink()){const l=s.depth===void 0?void 0:su(c,I.resolve(D.watchPath))+1;this._handleFsEventsSymlink(c,f,i,l)}else this.emitAdd(c,a.stats,i,s,r)}).on(ta,ca).on(ra,()=>{this.fsw._emitReady()})}else this.emitAdd(D.watchPath,o,i,s,r),this.fsw._emitReady()}catch(o){(!o||this.fsw._handleError(o))&&(this.fsw._emitReady(),this.fsw._emitReady())}if(s.persistent&&r!==!0)if(typeof u===ru)this.initWatch(void 0,e,D,i);else{let o;try{o=await sn(D.watchPath)}catch{}this.initWatch(o,e,D,i)}}}Jt.exports=Aa,Jt.exports.canUse=ma;const{EventEmitter:ya}=Pn.default,iu=De.default,v=K.default,{promisify:on}=me.default,wa=AD,Du=Wt.exports.default,Ra=ID,ou=vr,ba=vo,va=Ar,Ba=Jo,an=Jt.exports,{EV_ALL:au,EV_READY:Sa,EV_ADD:st,EV_CHANGE:Oe,EV_UNLINK:ln,EV_ADD_DIR:$a,EV_UNLINK_DIR:Ta,EV_RAW:xa,EV_ERROR:lu,STR_CLOSE:Oa,STR_END:Na,BACK_SLASH_RE:Ha,DOUBLE_SLASH_RE:cn,SLASH_OR_BACK_SLASH_RE:Pa,DOT_RE:La,REPLACER_RE:Ia,SLASH:cu,SLASH_SLASH:ka,BRACE_START:Ma,BANG:fu,ONE_DOT:fn,TWO_DOTS:Wa,GLOBSTAR:Ga,SLASH_GLOBSTAR:hu,ANYMATCH_OPTS:du,STRING_TYPE:Eu,FUNCTION_TYPE:ja,EMPTY_STR:pu,EMPTY_FN:Ua,isWindows:Ka,isMacos:Va,isIBMi:za}=Je,Ya=on(iu.stat),qa=on(iu.readdir),Cu=(t=[])=>Array.isArray(t)?t:[t],hn=(t,e=[])=>(t.forEach(u=>{Array.isArray(u)?hn(u,e):e.push(u)}),e),dn=t=>{const e=hn(Cu(t));if(!e.every(u=>typeof u===Eu))throw new TypeError(`Non-string provided as watch path: ${e}`);return e.map(pn)},En=t=>{let e=t.replace(Ha,cu),u=!1;for(e.startsWith(ka)&&(u=!0);e.match(cn);)e=e.replace(cn,cu);return u&&(e=cu+e),e},pn=t=>En(v.normalize(En(t))),Cn=(t=pu)=>e=>typeof e!==Eu?e:pn(v.isAbsolute(e)?e:v.join(t,e)),Xa=(t,e)=>v.isAbsolute(t)?t:t.startsWith(fu)?fu+v.join(e,t.slice(1)):v.join(e,t),q=(t,e)=>t[e]===void 0;class Qa{constructor(e,u){this.path=e,this._removeWatcher=u,this.items=new Set}add(e){const{items:u}=this;!u||e!==fn&&e!==Wa&&u.add(e)}async remove(e){const{items:u}=this;if(!u||(u.delete(e),u.size>0))return;const r=this.path;try{await qa(r)}catch{this._removeWatcher&&this._removeWatcher(v.dirname(r),v.basename(r))}}has(e){const{items:u}=this;if(!!u)return u.has(e)}getChildren(){const{items:e}=this;if(!!e)return[...e.values()]}dispose(){this.items.clear(),delete this.path,delete this._removeWatcher,delete this.items,Object.freeze(this)}}const Za="stat",Ja="lstat";class el{constructor(e,u,r,n){this.fsw=n,this.path=e=e.replace(Ia,pu),this.watchPath=u,this.fullWatchPath=v.resolve(u),this.hasGlob=u!==e,e===pu&&(this.hasGlob=!1),this.globSymlink=this.hasGlob&&r?void 0:!1,this.globFilter=this.hasGlob?Du(e,void 0,du):!1,this.dirParts=this.getDirParts(e),this.dirParts.forEach(s=>{s.length>1&&s.pop()}),this.followSymlinks=r,this.statMethod=r?Za:Ja}checkGlobSymlink(e){return this.globSymlink===void 0&&(this.globSymlink=e.fullParentDir===this.fullWatchPath?!1:{realPath:e.fullParentDir,linkPath:this.fullWatchPath}),this.globSymlink?e.fullPath.replace(this.globSymlink.realPath,this.globSymlink.linkPath):e.fullPath}entryPath(e){return v.join(this.watchPath,v.relative(this.watchPath,this.checkGlobSymlink(e)))}filterPath(e){const{stats:u}=e;if(u&&u.isSymbolicLink())return this.filterDir(e);const r=this.entryPath(e);return(this.hasGlob&&typeof this.globFilter===ja?this.globFilter(r):!0)&&this.fsw._isntIgnored(r,u)&&this.fsw._hasReadPermissions(u)}getDirParts(e){if(!this.hasGlob)return[];const u=[];return(e.includes(Ma)?ba.expand(e):[e]).forEach(n=>{u.push(v.relative(this.watchPath,n).split(Pa))}),u}filterDir(e){if(this.hasGlob){const u=this.getDirParts(this.checkGlobSymlink(e));let r=!1;this.unmatchedGlob=!this.dirParts.some(n=>n.every((s,i)=>(s===Ga&&(r=!0),r||!u[0][i]||Du(s,u[0][i],du))))}return!this.unmatchedGlob&&this.fsw._isntIgnored(this.entryPath(e),e.stats)}}class tl extends ya{constructor(e){super();const u={};e&&Object.assign(u,e),this._watched=new Map,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._symlinkPaths=new Map,this._streams=new Set,this.closed=!1,q(u,"persistent")&&(u.persistent=!0),q(u,"ignoreInitial")&&(u.ignoreInitial=!1),q(u,"ignorePermissionErrors")&&(u.ignorePermissionErrors=!1),q(u,"interval")&&(u.interval=100),q(u,"binaryInterval")&&(u.binaryInterval=300),q(u,"disableGlobbing")&&(u.disableGlobbing=!1),u.enableBinaryInterval=u.binaryInterval!==u.interval,q(u,"useFsEvents")&&(u.useFsEvents=!u.usePolling),an.canUse()||(u.useFsEvents=!1),q(u,"usePolling")&&!u.useFsEvents&&(u.usePolling=Va),za&&(u.usePolling=!0);const n=process.env.CHOKIDAR_USEPOLLING;if(n!==void 0){const o=n.toLowerCase();o==="false"||o==="0"?u.usePolling=!1:o==="true"||o==="1"?u.usePolling=!0:u.usePolling=!!o}const s=process.env.CHOKIDAR_INTERVAL;s&&(u.interval=Number.parseInt(s,10)),q(u,"atomic")&&(u.atomic=!u.usePolling&&!u.useFsEvents),u.atomic&&(this._pendingUnlinks=new Map),q(u,"followSymlinks")&&(u.followSymlinks=!0),q(u,"awaitWriteFinish")&&(u.awaitWriteFinish=!1),u.awaitWriteFinish===!0&&(u.awaitWriteFinish={});const i=u.awaitWriteFinish;i&&(i.stabilityThreshold||(i.stabilityThreshold=2e3),i.pollInterval||(i.pollInterval=100),this._pendingWrites=new Map),u.ignored&&(u.ignored=Cu(u.ignored));let D=0;this._emitReady=()=>{D++,D>=this._readyCount&&(this._emitReady=Ua,this._readyEmitted=!0,process.nextTick(()=>this.emit(Sa)))},this._emitRaw=(...o)=>this.emit(xa,...o),this._readyEmitted=!1,this.options=u,u.useFsEvents?this._fsEventsHandler=new an(this):this._nodeFsHandler=new Ba(this),Object.freeze(u)}add(e,u,r){const{cwd:n,disableGlobbing:s}=this.options;this.closed=!1;let i=dn(e);return n&&(i=i.map(D=>{const o=Xa(D,n);return s||!ou(D)?o:va(o)})),i=i.filter(D=>D.startsWith(fu)?(this._ignoredPaths.add(D.slice(1)),!1):(this._ignoredPaths.delete(D),this._ignoredPaths.delete(D+hu),this._userIgnored=void 0,!0)),this.options.useFsEvents&&this._fsEventsHandler?(this._readyCount||(this._readyCount=i.length),this.options.persistent&&(this._readyCount*=2),i.forEach(D=>this._fsEventsHandler._addToFsEvents(D))):(this._readyCount||(this._readyCount=0),this._readyCount+=i.length,Promise.all(i.map(async D=>{const o=await this._nodeFsHandler._addToNodeFs(D,!r,0,0,u);return o&&this._emitReady(),o})).then(D=>{this.closed||D.filter(o=>o).forEach(o=>{this.add(v.dirname(o),v.basename(u||o))})})),this}unwatch(e){if(this.closed)return this;const u=dn(e),{cwd:r}=this.options;return u.forEach(n=>{!v.isAbsolute(n)&&!this._closers.has(n)&&(r&&(n=v.join(r,n)),n=v.resolve(n)),this._closePath(n),this._ignoredPaths.add(n),this._watched.has(n)&&this._ignoredPaths.add(n+hu),this._userIgnored=void 0}),this}close(){if(this.closed)return this._closePromise;this.closed=!0,this.removeAllListeners();const e=[];return this._closers.forEach(u=>u.forEach(r=>{const n=r();n instanceof Promise&&e.push(n)})),this._streams.forEach(u=>u.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach(u=>u.dispose()),["closers","watched","streams","symlinkPaths","throttled"].forEach(u=>{this[`_${u}`].clear()}),this._closePromise=e.length?Promise.all(e).then(()=>{}):Promise.resolve(),this._closePromise}getWatched(){const e={};return this._watched.forEach((u,r)=>{const n=this.options.cwd?v.relative(this.options.cwd,r):r;e[n||fn]=u.getChildren().sort()}),e}emitWithAll(e,u){this.emit(...u),e!==lu&&this.emit(au,...u)}async _emit(e,u,r,n,s){if(this.closed)return;const i=this.options;Ka&&(u=v.normalize(u)),i.cwd&&(u=v.relative(i.cwd,u));const D=[e,u];s!==void 0?D.push(r,n,s):n!==void 0?D.push(r,n):r!==void 0&&D.push(r);const o=i.awaitWriteFinish;let a;if(o&&(a=this._pendingWrites.get(u)))return a.lastChange=new Date,this;if(i.atomic){if(e===ln)return this._pendingUnlinks.set(u,D),setTimeout(()=>{this._pendingUnlinks.forEach((c,f)=>{this.emit(...c),this.emit(au,...c),this._pendingUnlinks.delete(f)})},typeof i.atomic=="number"?i.atomic:100),this;e===st&&this._pendingUnlinks.has(u)&&(e=D[0]=Oe,this._pendingUnlinks.delete(u))}if(o&&(e===st||e===Oe)&&this._readyEmitted){const c=(f,l)=>{f?(e=D[0]=lu,D[1]=f,this.emitWithAll(e,D)):l&&(D.length>2?D[2]=l:D.push(l),this.emitWithAll(e,D))};return this._awaitWriteFinish(u,o.stabilityThreshold,e,c),this}if(e===Oe&&!this._throttle(Oe,u,50))return this;if(i.alwaysStat&&r===void 0&&(e===st||e===$a||e===Oe)){const c=i.cwd?v.join(i.cwd,u):u;let f;try{f=await Ya(c)}catch{}if(!f||this.closed)return;D.push(f)}return this.emitWithAll(e,D),this}_handleError(e){const u=e&&e.code;return e&&u!=="ENOENT"&&u!=="ENOTDIR"&&(!this.options.ignorePermissionErrors||u!=="EPERM"&&u!=="EACCES")&&this.emit(lu,e),e||this.closed}_throttle(e,u,r){this._throttled.has(e)||this._throttled.set(e,new Map);const n=this._throttled.get(e),s=n.get(u);if(s)return s.count++,!1;let i;const D=()=>{const a=n.get(u),c=a?a.count:0;return n.delete(u),clearTimeout(i),a&&clearTimeout(a.timeoutObject),c};i=setTimeout(D,r);const o={timeoutObject:i,clear:D,count:0};return n.set(u,o),o}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(e,u,r,n){let s,i=e;this.options.cwd&&!v.isAbsolute(e)&&(i=v.join(this.options.cwd,e));const D=new Date,o=a=>{iu.stat(i,(c,f)=>{if(c||!this._pendingWrites.has(e)){c&&c.code!=="ENOENT"&&n(c);return}const l=Number(new Date);a&&f.size!==a.size&&(this._pendingWrites.get(e).lastChange=l);const p=this._pendingWrites.get(e);l-p.lastChange>=u?(this._pendingWrites.delete(e),n(void 0,f)):s=setTimeout(o,this.options.awaitWriteFinish.pollInterval,f)})};this._pendingWrites.has(e)||(this._pendingWrites.set(e,{lastChange:D,cancelWait:()=>(this._pendingWrites.delete(e),clearTimeout(s),r)}),s=setTimeout(o,this.options.awaitWriteFinish.pollInterval))}_getGlobIgnored(){return[...this._ignoredPaths.values()]}_isIgnored(e,u){if(this.options.atomic&&La.test(e))return!0;if(!this._userIgnored){const{cwd:r}=this.options,n=this.options.ignored,s=n&&n.map(Cn(r)),i=Cu(s).filter(o=>typeof o===Eu&&!ou(o)).map(o=>o+hu),D=this._getGlobIgnored().map(Cn(r)).concat(s,i);this._userIgnored=Du(D,void 0,du)}return this._userIgnored([e,u])}_isntIgnored(e,u){return!this._isIgnored(e,u)}_getWatchHelpers(e,u){const r=u||this.options.disableGlobbing||!ou(e)?e:Ra(e),n=this.options.followSymlinks;return new el(e,r,n,this)}_getWatchedDir(e){this._boundRemove||(this._boundRemove=this._remove.bind(this));const u=v.resolve(e);return this._watched.has(u)||this._watched.set(u,new Qa(u,this._boundRemove)),this._watched.get(u)}_hasReadPermissions(e){if(this.options.ignorePermissionErrors)return!0;const r=(e&&Number.parseInt(e.mode,10))&511,n=Number.parseInt(r.toString(8)[0],10);return Boolean(4&n)}_remove(e,u,r){const n=v.join(e,u),s=v.resolve(n);if(r=r!=null?r:this._watched.has(n)||this._watched.has(s),!this._throttle("remove",n,100))return;!r&&!this.options.useFsEvents&&this._watched.size===1&&this.add(e,u,!0),this._getWatchedDir(n).getChildren().forEach(l=>this._remove(n,l));const o=this._getWatchedDir(e),a=o.has(u);o.remove(u),this._symlinkPaths.has(s)&&this._symlinkPaths.delete(s);let c=n;if(this.options.cwd&&(c=v.relative(this.options.cwd,n)),this.options.awaitWriteFinish&&this._pendingWrites.has(c)&&this._pendingWrites.get(c).cancelWait()===st)return;this._watched.delete(n),this._watched.delete(s);const f=r?Ta:ln;a&&!this._isIgnored(n)&&this._emit(f,n),this.options.useFsEvents||this._closePath(n)}_closePath(e){this._closeFile(e);const u=v.dirname(e);this._getWatchedDir(u).remove(v.basename(e))}_closeFile(e){const u=this._closers.get(e);!u||(u.forEach(r=>r()),this._closers.delete(e))}_addPathCloser(e,u){if(!u)return;let r=this._closers.get(e);r||(r=[],this._closers.set(e,r)),r.push(u)}_readdirp(e,u){if(this.closed)return;const r={type:au,alwaysStat:!0,lstat:!0,...u};let n=wa(e,r);return this._streams.add(n),n.once(Oa,()=>{n=void 0}),n.once(Na,()=>{n&&(this._streams.delete(n),n=void 0)}),n}}const ul=(t,e)=>{const u=new tl(e);return u.add(t),u};var rl=ul;const Fu=(t=!0)=>{let e=!1;return u=>{if(e||u==="unknown-flag")return!0;if(u==="argument")return e=!0,t}};function Fn(t,e=process.argv.slice(2)){return yu(t,e,{ignore:Fu()}),e}let fe=!0;const _e=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let gn=0;if(_e.process&&_e.process.env&&_e.process.stdout){const{FORCE_COLOR:t,NODE_DISABLE_COLORS:e,TERM:u}=_e.process.env;e||t==="0"?fe=!1:t==="1"?fe=!0:u==="dumb"?fe=!1:"CI"in _e.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(r=>r in _e.process.env)?fe=!0:fe=process.stdout.isTTY,fe&&(gn=u&&u.endsWith("-256color")?2:1)}let _n={enabled:fe,supportLevel:gn};function mn(t,e,u=1){const r=`\x1B[${t}m`,n=`\x1B[${e}m`,s=new RegExp(`\\x1b\\[${e}m`,"g");return i=>_n.enabled&&_n.supportLevel>=u?r+(""+i).replace(s,r)+n:""+i}const nl=mn(90,39),sl=mn(96,39),il=()=>"watcher: " + new Date().toISOString(),Dl=(...t)=>console.log(nl(il()),sl("[tsx]"),...t),ol="\x1Bc";function al(t,e){let u;return()=>{u&&clearTimeout(u),u=setTimeout(()=>t(),e)}}function ll(t){return t&&typeof t=="object"&&t.type==="dependency"}const An={noCache:{type:Boolean,description:"Disable caching",default:!1},tsconfig:{type:String,description:"Custom tsconfig.json path"},clearScreen:{type:Boolean,description:"Clearing the screen on rerun",default:!0},ignore:{type:[String],description:"Paths & globs to exclude from being watched"}},cl=ui({name:"watch",parameters:["<script path>"],flags:An,help:{description:"Run the script and watch for changes"},ignoreArgv:Fu(!1)},t=>{const e=Fn(An,process.argv.slice(3)),u={noCache:t.flags.noCache,tsconfigPath:t.flags.tsconfig,clearScreen:t.flags.clearScreen,ignore:t.flags.ignore,ipc:!0};let r;const n=al(()=>{r&&!r.killed&&r.exitCode===null&&r.kill(),r&&Dl("rerunning"),u.clearScreen&&process.stdout.write(ol),r=nr(e,u),r.on("message",o=>{if(ll(o)){const a=o.path.startsWith("file:")?gu.fileURLToPath(o.path):o.path;K.default.isAbsolute(a)&&D.add(a)}})},100);n();function s(o){process.exit(128+_u.constants.signals[o])}function i(o){r&&r.exitCode===null?(r.on("close",()=>s(o)),r.kill(o)):s(o)}process.once("SIGINT",i),process.once("SIGTERM",i);const D=rl(t._,{cwd:process.cwd(),ignoreInitial:!0,ignored:["**/.*/**","**/.*","**/{node_modules,bower_components,vendor}/**",...u.ignore],ignorePermissionErrors:!0}).on("all",n);process.stdin.on("data",n)}),yn={noCache:{type:Boolean,description:"Disable caching"},tsconfig:{type:String,description:"Custom tsconfig.json path"}};ti({name:"tsx",parameters:["[script path]"],commands:[cl],flags:{...yn,version:{type:Boolean,alias:"v",description:"Show version"},help:{type:Boolean,alias:"h",description:"Show help"}},help:!1,ignoreArgv:Fu()},t=>{t.flags.version?process.stdout.write(`tsx v${vn.version}
 node `):t.flags.help&&(t.showHelp({description:"Node.js runtime enhanced with esbuild for loading TypeScript & ESM"}),console.log(`${"-".repeat(45)}
 `));const e=nr(Fn(yn),{noCache:Boolean(t.flags.noCache),tsconfigPath:t.flags.tsconfig}),u=async r=>{await Promise.race([new Promise(s=>{function i(D){D&&D.type==="kill"&&(s(D.signal),e.off("message",i))}e.on("message",i)}),new Promise(s=>{setTimeout(s,10)})])||e.kill(r)};process.on("SIGINT",u),process.on("SIGTERM",u),e.on("close",r=>process.exit(r))});
diff --git a/dist/cli.js b/dist/cli.js
index b801281afdae52fa36e2cd3c893535bdb83ecb48..d814fb21b30f21bc28624309f0e9349326b6b147 100755
--- a/dist/cli.js
+++ b/dist/cli.js
@@ -50,6 +50,6 @@ import ys from"tty";import{v as ws}from"./package-2c948d8d.js";import{r as Dt}fr
  * Copyright (c) 2014-present, Jon Schlinkert.
  * Licensed under the MIT License.
  */const WD=me,Nn=MD,Hn=t=>t!==null&&typeof t=="object"&&!Array.isArray(t),GD=t=>e=>t===!0?Number(e):String(e),Kt=t=>typeof t=="number"||typeof t=="string"&&t!=="",be=t=>Number.isInteger(+t),Vt=t=>{let e=`${t}`,u=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++u]==="0";);return u>0},jD=(t,e,u)=>typeof t=="string"||typeof e=="string"?!0:u.stringify===!0,UD=(t,e,u)=>{if(e>0){let n=t[0]==="-"?"-":"";n&&(t=t.slice(1)),t=n+t.padStart(n?e-1:e,"0")}return u===!1?String(t):t},Pn=(t,e)=>{let u=t[0]==="-"?"-":"";for(u&&(t=t.slice(1),e--);t.length<e;)t="0"+t;return u?"-"+t:t},KD=(t,e)=>{t.negatives.sort((i,D)=>i<D?-1:i>D?1:0),t.positives.sort((i,D)=>i<D?-1:i>D?1:0);let u=e.capture?"":"?:",n="",s="",r;return t.positives.length&&(n=t.positives.join("|")),t.negatives.length&&(s=`-(${u}${t.negatives.join("|")})`),n&&s?r=`${n}|${s}`:r=n||s,e.wrap?`(${u}${r})`:r},Ln=(t,e,u,n)=>{if(u)return Nn(t,e,{wrap:!1,...n});let s=String.fromCharCode(t);if(t===e)return s;let r=String.fromCharCode(e);return`[${s}-${r}]`},In=(t,e,u)=>{if(Array.isArray(t)){let n=u.wrap===!0,s=u.capture?"":"?:";return n?`(${s}${t.join("|")})`:t.join("|")}return Nn(t,e,u)},kn=(...t)=>new RangeError("Invalid range arguments: "+WD.inspect(...t)),Mn=(t,e,u)=>{if(u.strictRanges===!0)throw kn([t,e]);return[]},VD=(t,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${t}" to be a number`);return[]},zD=(t,e,u=1,n={})=>{let s=Number(t),r=Number(e);if(!Number.isInteger(s)||!Number.isInteger(r)){if(n.strictRanges===!0)throw kn([t,e]);return[]}s===0&&(s=0),r===0&&(r=0);let i=s>r,D=String(t),o=String(e),a=String(u);u=Math.max(Math.abs(u),1);let c=Vt(D)||Vt(o)||Vt(a),f=c?Math.max(D.length,o.length,a.length):0,l=c===!1&&jD(t,e,n)===!1,p=n.transform||GD(l);if(n.toRegex&&u===1)return Ln(Pn(t,f),Pn(e,f),!0,n);let C={negatives:[],positives:[]},F=H=>C[H<0?"negatives":"positives"].push(Math.abs(H)),A=[],B=0;for(;i?s>=r:s<=r;)n.toRegex===!0&&u>1?F(s):A.push(UD(p(s,B),f,l)),s=i?s-u:s+u,B++;return n.toRegex===!0?u>1?KD(C,n):In(A,null,{wrap:!1,...n}):A},YD=(t,e,u=1,n={})=>{if(!be(t)&&t.length>1||!be(e)&&e.length>1)return Mn(t,e,n);let s=n.transform||(l=>String.fromCharCode(l)),r=`${t}`.charCodeAt(0),i=`${e}`.charCodeAt(0),D=r>i,o=Math.min(r,i),a=Math.max(r,i);if(n.toRegex&&u===1)return Ln(o,a,!1,n);let c=[],f=0;for(;D?r>=i:r<=i;)c.push(s(r,f)),r=D?r-u:r+u,f++;return n.toRegex===!0?In(c,null,{wrap:!1,options:n}):c},Qe=(t,e,u,n={})=>{if(e==null&&Kt(t))return[t];if(!Kt(t)||!Kt(e))return Mn(t,e,n);if(typeof u=="function")return Qe(t,e,1,{transform:u});if(Hn(u))return Qe(t,e,0,u);let s={...n};return s.capture===!0&&(s.wrap=!0),u=u||s.step||1,be(u)?be(t)&&be(e)?zD(t,e,u,s):YD(t,e,Math.max(Math.abs(u),1),s):u!=null&&!Hn(u)?VD(u,s):Qe(t,e,1,u)};var Wn=Qe;const qD=Wn,Gn=Xe,XD=(t,e={})=>{let u=(n,s={})=>{let r=Gn.isInvalidBrace(s),i=n.invalid===!0&&e.escapeInvalid===!0,D=r===!0||i===!0,o=e.escapeInvalid===!0?"\\":"",a="";if(n.isOpen===!0||n.isClose===!0)return o+n.value;if(n.type==="open")return D?o+n.value:"(";if(n.type==="close")return D?o+n.value:")";if(n.type==="comma")return n.prev.type==="comma"?"":D?n.value:"|";if(n.value)return n.value;if(n.nodes&&n.ranges>0){let c=Gn.reduce(n.nodes),f=qD(...c,{...e,wrap:!1,toRegex:!0});if(f.length!==0)return c.length>1&&f.length>1?`(${f})`:f}if(n.nodes)for(let c of n.nodes)a+=u(c,n);return a};return u(t)};var QD=XD;const ZD=Wn,jn=jt,pe=Xe,ae=(t="",e="",u=!1)=>{let n=[];if(t=[].concat(t),e=[].concat(e),!e.length)return t;if(!t.length)return u?pe.flatten(e).map(s=>`{${s}}`):e;for(let s of t)if(Array.isArray(s))for(let r of s)n.push(ae(r,e,u));else for(let r of e)u===!0&&typeof r=="string"&&(r=`{${r}}`),n.push(Array.isArray(r)?ae(s,r,u):s+r);return pe.flatten(n)},JD=(t,e={})=>{let u=e.rangeLimit===void 0?1e3:e.rangeLimit,n=(s,r={})=>{s.queue=[];let i=r,D=r.queue;for(;i.type!=="brace"&&i.type!=="root"&&i.parent;)i=i.parent,D=i.queue;if(s.invalid||s.dollar){D.push(ae(D.pop(),jn(s,e)));return}if(s.type==="brace"&&s.invalid!==!0&&s.nodes.length===2){D.push(ae(D.pop(),["{}"]));return}if(s.nodes&&s.ranges>0){let f=pe.reduce(s.nodes);if(pe.exceedsLimit(...f,e.step,u))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let l=ZD(...f,e);l.length===0&&(l=jn(s,e)),D.push(ae(D.pop(),l)),s.nodes=[];return}let o=pe.encloseBrace(s),a=s.queue,c=s;for(;c.type!=="brace"&&c.type!=="root"&&c.parent;)c=c.parent,a=c.queue;for(let f=0;f<s.nodes.length;f++){let l=s.nodes[f];if(l.type==="comma"&&s.type==="brace"){f===1&&a.push(""),a.push("");continue}if(l.type==="close"){D.push(ae(D.pop(),a,o));continue}if(l.value&&l.type!=="open"){a.push(ae(a.pop(),l.value));continue}l.nodes&&n(l,s)}return a};return pe.flatten(n(t))};var eo=JD,to={MAX_LENGTH:1024*64,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
-`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"};const uo=jt,{MAX_LENGTH:Un,CHAR_BACKSLASH:zt,CHAR_BACKTICK:no,CHAR_COMMA:so,CHAR_DOT:ro,CHAR_LEFT_PARENTHESES:io,CHAR_RIGHT_PARENTHESES:Do,CHAR_LEFT_CURLY_BRACE:oo,CHAR_RIGHT_CURLY_BRACE:ao,CHAR_LEFT_SQUARE_BRACKET:Kn,CHAR_RIGHT_SQUARE_BRACKET:Vn,CHAR_DOUBLE_QUOTE:lo,CHAR_SINGLE_QUOTE:co,CHAR_NO_BREAK_SPACE:fo,CHAR_ZERO_WIDTH_NOBREAK_SPACE:ho}=to,Eo=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let u=e||{},n=typeof u.maxLength=="number"?Math.min(Un,u.maxLength):Un;if(t.length>n)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${n})`);let s={type:"root",input:t,nodes:[]},r=[s],i=s,D=s,o=0,a=t.length,c=0,f=0,l;const p=()=>t[c++],C=F=>{if(F.type==="text"&&D.type==="dot"&&(D.type="text"),D&&D.type==="text"&&F.type==="text"){D.value+=F.value;return}return i.nodes.push(F),F.parent=i,F.prev=D,D=F,F};for(C({type:"bos"});c<a;)if(i=r[r.length-1],l=p(),!(l===ho||l===fo)){if(l===zt){C({type:"text",value:(e.keepEscaping?l:"")+p()});continue}if(l===Vn){C({type:"text",value:"\\"+l});continue}if(l===Kn){o++;let F;for(;c<a&&(F=p());){if(l+=F,F===Kn){o++;continue}if(F===zt){l+=p();continue}if(F===Vn&&(o--,o===0))break}C({type:"text",value:l});continue}if(l===io){i=C({type:"paren",nodes:[]}),r.push(i),C({type:"text",value:l});continue}if(l===Do){if(i.type!=="paren"){C({type:"text",value:l});continue}i=r.pop(),C({type:"text",value:l}),i=r[r.length-1];continue}if(l===lo||l===co||l===no){let F=l,A;for(e.keepQuotes!==!0&&(l="");c<a&&(A=p());){if(A===zt){l+=A+p();continue}if(A===F){e.keepQuotes===!0&&(l+=A);break}l+=A}C({type:"text",value:l});continue}if(l===oo){f++;let A={type:"brace",open:!0,close:!1,dollar:D.value&&D.value.slice(-1)==="$"||i.dollar===!0,depth:f,commas:0,ranges:0,nodes:[]};i=C(A),r.push(i),C({type:"open",value:l});continue}if(l===ao){if(i.type!=="brace"){C({type:"text",value:l});continue}let F="close";i=r.pop(),i.close=!0,C({type:F,value:l}),f--,i=r[r.length-1];continue}if(l===so&&f>0){if(i.ranges>0){i.ranges=0;let F=i.nodes.shift();i.nodes=[F,{type:"text",value:uo(i)}]}C({type:"comma",value:l}),i.commas++;continue}if(l===ro&&f>0&&i.commas===0){let F=i.nodes;if(f===0||F.length===0){C({type:"text",value:l});continue}if(D.type==="dot"){if(i.range=[],D.value+=l,D.type="range",i.nodes.length!==3&&i.nodes.length!==5){i.invalid=!0,i.ranges=0,D.type="text";continue}i.ranges++,i.args=[];continue}if(D.type==="range"){F.pop();let A=F[F.length-1];A.value+=D.value+l,D=A,i.ranges--;continue}C({type:"dot",value:l});continue}C({type:"text",value:l})}do if(i=r.pop(),i.type!=="root"){i.nodes.forEach(B=>{B.nodes||(B.type==="open"&&(B.isOpen=!0),B.type==="close"&&(B.isClose=!0),B.nodes||(B.type="text"),B.invalid=!0)});let F=r[r.length-1],A=F.nodes.indexOf(i);F.nodes.splice(A,1,...i.nodes)}while(r.length>0);return C({type:"eos"}),s};var po=Eo;const zn=jt,Co=QD,Fo=eo,go=po,Y=(t,e={})=>{let u=[];if(Array.isArray(t))for(let n of t){let s=Y.create(n,e);Array.isArray(s)?u.push(...s):u.push(s)}else u=[].concat(Y.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(u=[...new Set(u)]),u};Y.parse=(t,e={})=>go(t,e),Y.stringify=(t,e={})=>zn(typeof t=="string"?Y.parse(t,e):t,e),Y.compile=(t,e={})=>(typeof t=="string"&&(t=Y.parse(t,e)),Co(t,e)),Y.expand=(t,e={})=>{typeof t=="string"&&(t=Y.parse(t,e));let u=Fo(t,e);return e.noempty===!0&&(u=u.filter(Boolean)),e.nodupes===!0&&(u=[...new Set(u)]),u},Y.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?Y.compile(t,e):Y.expand(t,e);var mo=Y,Yn={exports:{}},_o=["3dm","3ds","3g2","3gp","7z","a","aac","adp","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"];(function(t){t.exports=_o})(Yn);const Ao=K,yo=Yn.exports,wo=new Set(yo);var Ro=t=>wo.has(Ao.extname(t).slice(1).toLowerCase()),Ze={};(function(t){const{sep:e}=K,{platform:u}=process,n=Fu;t.EV_ALL="all",t.EV_READY="ready",t.EV_ADD="add",t.EV_CHANGE="change",t.EV_ADD_DIR="addDir",t.EV_UNLINK="unlink",t.EV_UNLINK_DIR="unlinkDir",t.EV_RAW="raw",t.EV_ERROR="error",t.STR_DATA="data",t.STR_END="end",t.STR_CLOSE="close",t.FSEVENT_CREATED="created",t.FSEVENT_MODIFIED="modified",t.FSEVENT_DELETED="deleted",t.FSEVENT_MOVED="moved",t.FSEVENT_CLONED="cloned",t.FSEVENT_UNKNOWN="unknown",t.FSEVENT_TYPE_FILE="file",t.FSEVENT_TYPE_DIRECTORY="directory",t.FSEVENT_TYPE_SYMLINK="symlink",t.KEY_LISTENERS="listeners",t.KEY_ERR="errHandlers",t.KEY_RAW="rawEmitters",t.HANDLER_KEYS=[t.KEY_LISTENERS,t.KEY_ERR,t.KEY_RAW],t.DOT_SLASH=`.${e}`,t.BACK_SLASH_RE=/\\/g,t.DOUBLE_SLASH_RE=/\/\//,t.SLASH_OR_BACK_SLASH_RE=/[/\\]/,t.DOT_RE=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/,t.REPLACER_RE=/^\.[/\\]/,t.SLASH="/",t.SLASH_SLASH="//",t.BRACE_START="{",t.BANG="!",t.ONE_DOT=".",t.TWO_DOTS="..",t.STAR="*",t.GLOBSTAR="**",t.ROOT_GLOBSTAR="/**/*",t.SLASH_GLOBSTAR="/**",t.DIR_SUFFIX="Dir",t.ANYMATCH_OPTS={dot:!0},t.STRING_TYPE="string",t.FUNCTION_TYPE="function",t.EMPTY_STR="",t.EMPTY_FN=()=>{},t.IDENTITY_FN=s=>s,t.isWindows=u==="win32",t.isMacos=u==="darwin",t.isLinux=u==="linux",t.isIBMi=n.type()==="OS400"})(Ze);const ue=ie,L=K,{promisify:ve}=me,bo=Ro,{isWindows:vo,isLinux:Bo,EMPTY_FN:So,EMPTY_STR:$o,KEY_LISTENERS:Ce,KEY_ERR:Yt,KEY_RAW:Be,HANDLER_KEYS:To,EV_CHANGE:Je,EV_ADD:et,EV_ADD_DIR:xo,EV_ERROR:qn,STR_DATA:Oo,STR_END:No,BRACE_START:Ho,STAR:Po}=Ze,Lo="watch",Io=ve(ue.open),Xn=ve(ue.stat),ko=ve(ue.lstat),Mo=ve(ue.close),qt=ve(ue.realpath),Wo={lstat:ko,stat:Xn},Xt=(t,e)=>{t instanceof Set?t.forEach(e):e(t)},Se=(t,e,u)=>{let n=t[e];n instanceof Set||(t[e]=n=new Set([n])),n.add(u)},Go=t=>e=>{const u=t[e];u instanceof Set?u.clear():delete t[e]},$e=(t,e,u)=>{const n=t[e];n instanceof Set?n.delete(u):n===u&&delete t[e]},Qn=t=>t instanceof Set?t.size===0:!t,tt=new Map;function Zn(t,e,u,n,s){const r=(i,D)=>{u(t),s(i,D,{watchedPath:t}),D&&t!==D&&ut(L.resolve(t,D),Ce,L.join(t,D))};try{return ue.watch(t,e,r)}catch(i){n(i)}}const ut=(t,e,u,n,s)=>{const r=tt.get(t);!r||Xt(r[e],i=>{i(u,n,s)})},jo=(t,e,u,n)=>{const{listener:s,errHandler:r,rawEmitter:i}=n;let D=tt.get(e),o;if(!u.persistent)return o=Zn(t,u,s,r,i),o.close.bind(o);if(D)Se(D,Ce,s),Se(D,Yt,r),Se(D,Be,i);else{if(o=Zn(t,u,ut.bind(null,e,Ce),r,ut.bind(null,e,Be)),!o)return;o.on(qn,async a=>{const c=ut.bind(null,e,Yt);if(D.watcherUnusable=!0,vo&&a.code==="EPERM")try{const f=await Io(t,"r");await Mo(f),c(a)}catch{}else c(a)}),D={listeners:s,errHandlers:r,rawEmitters:i,watcher:o},tt.set(e,D)}return()=>{$e(D,Ce,s),$e(D,Yt,r),$e(D,Be,i),Qn(D.listeners)&&(D.watcher.close(),tt.delete(e),To.forEach(Go(D)),D.watcher=void 0,Object.freeze(D))}},Qt=new Map,Uo=(t,e,u,n)=>{const{listener:s,rawEmitter:r}=n;let i=Qt.get(e);const D=i&&i.options;return D&&(D.persistent<u.persistent||D.interval>u.interval)&&(i.listeners,i.rawEmitters,ue.unwatchFile(e),i=void 0),i?(Se(i,Ce,s),Se(i,Be,r)):(i={listeners:s,rawEmitters:r,options:u,watcher:ue.watchFile(e,u,(o,a)=>{Xt(i.rawEmitters,f=>{f(Je,e,{curr:o,prev:a})});const c=o.mtimeMs;(o.size!==a.size||c>a.mtimeMs||c===0)&&Xt(i.listeners,f=>f(t,o))})},Qt.set(e,i)),()=>{$e(i,Ce,s),$e(i,Be,r),Qn(i.listeners)&&(Qt.delete(e),ue.unwatchFile(e),i.options=i.watcher=void 0,Object.freeze(i))}};class Ko{constructor(e){this.fsw=e,this._boundHandleError=u=>e._handleError(u)}_watchWithNodeFs(e,u){const n=this.fsw.options,s=L.dirname(e),r=L.basename(e);this.fsw._getWatchedDir(s).add(r);const D=L.resolve(e),o={persistent:n.persistent};u||(u=So);let a;return n.usePolling?(o.interval=n.enableBinaryInterval&&bo(r)?n.binaryInterval:n.interval,a=Uo(e,D,o,{listener:u,rawEmitter:this.fsw._emitRaw})):a=jo(e,D,o,{listener:u,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw}),a}_handleFile(e,u,n){if(this.fsw.closed)return;const s=L.dirname(e),r=L.basename(e),i=this.fsw._getWatchedDir(s);let D=u;if(i.has(r))return;const o=async(c,f)=>{if(!!this.fsw._throttle(Lo,e,5)){if(!f||f.mtimeMs===0)try{const l=await Xn(e);if(this.fsw.closed)return;const p=l.atimeMs,C=l.mtimeMs;(!p||p<=C||C!==D.mtimeMs)&&this.fsw._emit(Je,e,l),Bo&&D.ino!==l.ino?(this.fsw._closeFile(c),D=l,this.fsw._addPathCloser(c,this._watchWithNodeFs(e,o))):D=l}catch{this.fsw._remove(s,r)}else if(i.has(r)){const l=f.atimeMs,p=f.mtimeMs;(!l||l<=p||p!==D.mtimeMs)&&this.fsw._emit(Je,e,f),D=f}}},a=this._watchWithNodeFs(e,o);if(!(n&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(e)){if(!this.fsw._throttle(et,e,0))return;this.fsw._emit(et,e,u)}return a}async _handleSymlink(e,u,n,s){if(this.fsw.closed)return;const r=e.fullPath,i=this.fsw._getWatchedDir(u);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let D;try{D=await qt(n)}catch{return this.fsw._emitReady(),!0}return this.fsw.closed?void 0:(i.has(s)?this.fsw._symlinkPaths.get(r)!==D&&(this.fsw._symlinkPaths.set(r,D),this.fsw._emit(Je,n,e.stats)):(i.add(s),this.fsw._symlinkPaths.set(r,D),this.fsw._emit(et,n,e.stats)),this.fsw._emitReady(),!0)}if(this.fsw._symlinkPaths.has(r))return!0;this.fsw._symlinkPaths.set(r,!0)}_handleRead(e,u,n,s,r,i,D){if(e=L.join(e,$o),!n.hasGlob&&(D=this.fsw._throttle("readdir",e,1e3),!D))return;const o=this.fsw._getWatchedDir(n.path),a=new Set;let c=this.fsw._readdirp(e,{fileFilter:f=>n.filterPath(f),directoryFilter:f=>n.filterDir(f),depth:0}).on(Oo,async f=>{if(this.fsw.closed){c=void 0;return}const l=f.path;let p=L.join(e,l);if(a.add(l),!(f.stats.isSymbolicLink()&&await this._handleSymlink(f,e,p,l))){if(this.fsw.closed){c=void 0;return}(l===s||!s&&!o.has(l))&&(this.fsw._incrReadyCount(),p=L.join(r,L.relative(r,p)),this._addToNodeFs(p,u,n,i+1))}}).on(qn,this._boundHandleError);return new Promise(f=>c.once(No,()=>{if(this.fsw.closed){c=void 0;return}const l=D?D.clear():!1;f(),o.getChildren().filter(p=>p!==e&&!a.has(p)&&(!n.hasGlob||n.filterPath({fullPath:L.resolve(e,p)}))).forEach(p=>{this.fsw._remove(e,p)}),c=void 0,l&&this._handleRead(e,!1,n,s,r,i,D)}))}async _handleDir(e,u,n,s,r,i,D){const o=this.fsw._getWatchedDir(L.dirname(e)),a=o.has(L.basename(e));!(n&&this.fsw.options.ignoreInitial)&&!r&&!a&&(!i.hasGlob||i.globFilter(e))&&this.fsw._emit(xo,e,u),o.add(L.basename(e)),this.fsw._getWatchedDir(e);let c,f;const l=this.fsw.options.depth;if((l==null||s<=l)&&!this.fsw._symlinkPaths.has(D)){if(!r&&(await this._handleRead(e,n,i,r,e,s,c),this.fsw.closed))return;f=this._watchWithNodeFs(e,(p,C)=>{C&&C.mtimeMs===0||this._handleRead(p,!1,i,r,e,s,c)})}return f}async _addToNodeFs(e,u,n,s,r){const i=this.fsw._emitReady;if(this.fsw._isIgnored(e)||this.fsw.closed)return i(),!1;const D=this.fsw._getWatchHelpers(e,s);!D.hasGlob&&n&&(D.hasGlob=n.hasGlob,D.globFilter=n.globFilter,D.filterPath=o=>n.filterPath(o),D.filterDir=o=>n.filterDir(o));try{const o=await Wo[D.statMethod](D.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(D.watchPath,o))return i(),!1;const a=this.fsw.options.followSymlinks&&!e.includes(Po)&&!e.includes(Ho);let c;if(o.isDirectory()){const f=L.resolve(e),l=a?await qt(e):e;if(this.fsw.closed||(c=await this._handleDir(D.watchPath,o,u,s,r,D,l),this.fsw.closed))return;f!==l&&l!==void 0&&this.fsw._symlinkPaths.set(f,l)}else if(o.isSymbolicLink()){const f=a?await qt(e):e;if(this.fsw.closed)return;const l=L.dirname(D.watchPath);if(this.fsw._getWatchedDir(l).add(D.watchPath),this.fsw._emit(et,D.watchPath,o),c=await this._handleDir(l,o,u,s,e,D,f),this.fsw.closed)return;f!==void 0&&this.fsw._symlinkPaths.set(L.resolve(e),f)}else c=this._handleFile(D.watchPath,o,u);return i(),this.fsw._addPathCloser(e,c),!1}catch(o){if(this.fsw._handleError(o))return i(),e}}}var Vo=Ko,Zt={exports:{}};const Jt=ie,I=K,{promisify:eu}=me;let Fe;try{Fe=Dt("fsevents")}catch(t){process.env.CHOKIDAR_PRINT_FSEVENTS_REQUIRE_ERROR&&console.error(t)}if(Fe){const t=process.version.match(/v(\d+)\.(\d+)/);if(t&&t[1]&&t[2]){const e=Number.parseInt(t[1],10),u=Number.parseInt(t[2],10);e===8&&u<16&&(Fe=void 0)}}const{EV_ADD:tu,EV_CHANGE:zo,EV_ADD_DIR:Jn,EV_UNLINK:nt,EV_ERROR:Yo,STR_DATA:qo,STR_END:Xo,FSEVENT_CREATED:Qo,FSEVENT_MODIFIED:Zo,FSEVENT_DELETED:Jo,FSEVENT_MOVED:ea,FSEVENT_UNKNOWN:ta,FSEVENT_TYPE_FILE:ua,FSEVENT_TYPE_DIRECTORY:Te,FSEVENT_TYPE_SYMLINK:es,ROOT_GLOBSTAR:ts,DIR_SUFFIX:na,DOT_SLASH:us,FUNCTION_TYPE:uu,EMPTY_FN:sa,IDENTITY_FN:ra}=Ze,ia=t=>isNaN(t)?{}:{depth:t},nu=eu(Jt.stat),Da=eu(Jt.lstat),ns=eu(Jt.realpath),oa={stat:nu,lstat:Da},le=new Map,aa=10,la=new Set([69888,70400,71424,72704,73472,131328,131840,262912]),ca=(t,e)=>({stop:Fe.watch(t,e)});function fa(t,e,u,n){let s=I.extname(e)?I.dirname(e):e;const r=I.dirname(s);let i=le.get(s);ha(r)&&(s=r);const D=I.resolve(t),o=D!==e,a=(f,l,p)=>{o&&(f=f.replace(e,D)),(f===D||!f.indexOf(D+I.sep))&&u(f,l,p)};let c=!1;for(const f of le.keys())if(e.indexOf(I.resolve(f)+I.sep)===0){s=f,i=le.get(s),c=!0;break}return i||c?i.listeners.add(a):(i={listeners:new Set([a]),rawEmitter:n,watcher:ca(s,(f,l)=>{if(!i.listeners.size)return;const p=Fe.getInfo(f,l);i.listeners.forEach(C=>{C(f,l,p)}),i.rawEmitter(p.event,f,p)})},le.set(s,i)),()=>{const f=i.listeners;if(f.delete(a),!f.size&&(le.delete(s),i.watcher))return i.watcher.stop().then(()=>{i.rawEmitter=i.watcher=void 0,Object.freeze(i)})}}const ha=t=>{let e=0;for(const u of le.keys())if(u.indexOf(t)===0&&(e++,e>=aa))return!0;return!1},da=()=>Fe&&le.size<128,su=(t,e)=>{let u=0;for(;!t.indexOf(e)&&(t=I.dirname(t))!==e;)u++;return u},ss=(t,e)=>t.type===Te&&e.isDirectory()||t.type===es&&e.isSymbolicLink()||t.type===ua&&e.isFile();class Ea{constructor(e){this.fsw=e}checkIgnored(e,u){const n=this.fsw._ignoredPaths;if(this.fsw._isIgnored(e,u))return n.add(e),u&&u.isDirectory()&&n.add(e+ts),!0;n.delete(e),n.delete(e+ts)}addOrChange(e,u,n,s,r,i,D,o){const a=r.has(i)?zo:tu;this.handleEvent(a,e,u,n,s,r,i,D,o)}async checkExists(e,u,n,s,r,i,D,o){try{const a=await nu(e);if(this.fsw.closed)return;ss(D,a)?this.addOrChange(e,u,n,s,r,i,D,o):this.handleEvent(nt,e,u,n,s,r,i,D,o)}catch(a){a.code==="EACCES"?this.addOrChange(e,u,n,s,r,i,D,o):this.handleEvent(nt,e,u,n,s,r,i,D,o)}}handleEvent(e,u,n,s,r,i,D,o,a){if(!(this.fsw.closed||this.checkIgnored(u)))if(e===nt){const c=o.type===Te;(c||i.has(D))&&this.fsw._remove(r,D,c)}else{if(e===tu){if(o.type===Te&&this.fsw._getWatchedDir(u),o.type===es&&a.followSymlinks){const f=a.depth===void 0?void 0:su(n,s)+1;return this._addToFsEvents(u,!1,!0,f)}this.fsw._getWatchedDir(r).add(D)}const c=o.type===Te?e+na:e;this.fsw._emit(c,u),c===Jn&&this._addToFsEvents(u,!1,!0)}}_watchWithFsEvents(e,u,n,s){if(this.fsw.closed||this.fsw._isIgnored(e))return;const r=this.fsw.options,D=fa(e,u,async(o,a,c)=>{if(this.fsw.closed||r.depth!==void 0&&su(o,u)>r.depth)return;const f=n(I.join(e,I.relative(e,o)));if(s&&!s(f))return;const l=I.dirname(f),p=I.basename(f),C=this.fsw._getWatchedDir(c.type===Te?f:l);if(la.has(a)||c.event===ta)if(typeof r.ignored===uu){let F;try{F=await nu(f)}catch{}if(this.fsw.closed||this.checkIgnored(f,F))return;ss(c,F)?this.addOrChange(f,o,u,l,C,p,c,r):this.handleEvent(nt,f,o,u,l,C,p,c,r)}else this.checkExists(f,o,u,l,C,p,c,r);else switch(c.event){case Qo:case Zo:return this.addOrChange(f,o,u,l,C,p,c,r);case Jo:case ea:return this.checkExists(f,o,u,l,C,p,c,r)}},this.fsw._emitRaw);return this.fsw._emitReady(),D}async _handleFsEventsSymlink(e,u,n,s){if(!(this.fsw.closed||this.fsw._symlinkPaths.has(u))){this.fsw._symlinkPaths.set(u,!0),this.fsw._incrReadyCount();try{const r=await ns(e);if(this.fsw.closed)return;if(this.fsw._isIgnored(r))return this.fsw._emitReady();this.fsw._incrReadyCount(),this._addToFsEvents(r||e,i=>{let D=e;return r&&r!==us?D=i.replace(r,e):i!==us&&(D=I.join(e,i)),n(D)},!1,s)}catch(r){if(this.fsw._handleError(r))return this.fsw._emitReady()}}}emitAdd(e,u,n,s,r){const i=n(e),D=u.isDirectory(),o=this.fsw._getWatchedDir(I.dirname(i)),a=I.basename(i);D&&this.fsw._getWatchedDir(i),!o.has(a)&&(o.add(a),(!s.ignoreInitial||r===!0)&&this.fsw._emit(D?Jn:tu,i,u))}initWatch(e,u,n,s){if(this.fsw.closed)return;const r=this._watchWithFsEvents(n.watchPath,I.resolve(e||n.watchPath),s,n.globFilter);this.fsw._addPathCloser(u,r)}async _addToFsEvents(e,u,n,s){if(this.fsw.closed)return;const r=this.fsw.options,i=typeof u===uu?u:ra,D=this.fsw._getWatchHelpers(e);try{const o=await oa[D.statMethod](D.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(D.watchPath,o))throw null;if(o.isDirectory()){if(D.globFilter||this.emitAdd(i(e),o,i,r,n),s&&s>r.depth)return;this.fsw._readdirp(D.watchPath,{fileFilter:a=>D.filterPath(a),directoryFilter:a=>D.filterDir(a),...ia(r.depth-(s||0))}).on(qo,a=>{if(this.fsw.closed||a.stats.isDirectory()&&!D.filterPath(a))return;const c=I.join(D.watchPath,a.path),{fullPath:f}=a;if(D.followSymlinks&&a.stats.isSymbolicLink()){const l=r.depth===void 0?void 0:su(c,I.resolve(D.watchPath))+1;this._handleFsEventsSymlink(c,f,i,l)}else this.emitAdd(c,a.stats,i,r,n)}).on(Yo,sa).on(Xo,()=>{this.fsw._emitReady()})}else this.emitAdd(D.watchPath,o,i,r,n),this.fsw._emitReady()}catch(o){(!o||this.fsw._handleError(o))&&(this.fsw._emitReady(),this.fsw._emitReady())}if(r.persistent&&n!==!0)if(typeof u===uu)this.initWatch(void 0,e,D,i);else{let o;try{o=await ns(D.watchPath)}catch{}this.initWatch(o,e,D,i)}}}Zt.exports=Ea,Zt.exports.canUse=da;const{EventEmitter:pa}=Ss,ru=ie,v=K,{promisify:rs}=me,Ca=ED,iu=Mt.exports.default,Fa=TD,Du=Rn,ga=mo,ma=mn,_a=Vo,is=Zt.exports,{EV_ALL:ou,EV_READY:Aa,EV_ADD:st,EV_CHANGE:xe,EV_UNLINK:Ds,EV_ADD_DIR:ya,EV_UNLINK_DIR:wa,EV_RAW:Ra,EV_ERROR:au,STR_CLOSE:ba,STR_END:va,BACK_SLASH_RE:Ba,DOUBLE_SLASH_RE:os,SLASH_OR_BACK_SLASH_RE:Sa,DOT_RE:$a,REPLACER_RE:Ta,SLASH:lu,SLASH_SLASH:xa,BRACE_START:Oa,BANG:cu,ONE_DOT:as,TWO_DOTS:Na,GLOBSTAR:Ha,SLASH_GLOBSTAR:fu,ANYMATCH_OPTS:hu,STRING_TYPE:du,FUNCTION_TYPE:Pa,EMPTY_STR:Eu,EMPTY_FN:La,isWindows:Ia,isMacos:ka,isIBMi:Ma}=Ze,Wa=rs(ru.stat),Ga=rs(ru.readdir),pu=(t=[])=>Array.isArray(t)?t:[t],ls=(t,e=[])=>(t.forEach(u=>{Array.isArray(u)?ls(u,e):e.push(u)}),e),cs=t=>{const e=ls(pu(t));if(!e.every(u=>typeof u===du))throw new TypeError(`Non-string provided as watch path: ${e}`);return e.map(hs)},fs=t=>{let e=t.replace(Ba,lu),u=!1;for(e.startsWith(xa)&&(u=!0);e.match(os);)e=e.replace(os,lu);return u&&(e=lu+e),e},hs=t=>fs(v.normalize(fs(t))),ds=(t=Eu)=>e=>typeof e!==du?e:hs(v.isAbsolute(e)?e:v.join(t,e)),ja=(t,e)=>v.isAbsolute(t)?t:t.startsWith(cu)?cu+v.join(e,t.slice(1)):v.join(e,t),q=(t,e)=>t[e]===void 0;class Ua{constructor(e,u){this.path=e,this._removeWatcher=u,this.items=new Set}add(e){const{items:u}=this;!u||e!==as&&e!==Na&&u.add(e)}async remove(e){const{items:u}=this;if(!u||(u.delete(e),u.size>0))return;const n=this.path;try{await Ga(n)}catch{this._removeWatcher&&this._removeWatcher(v.dirname(n),v.basename(n))}}has(e){const{items:u}=this;if(!!u)return u.has(e)}getChildren(){const{items:e}=this;if(!!e)return[...e.values()]}dispose(){this.items.clear(),delete this.path,delete this._removeWatcher,delete this.items,Object.freeze(this)}}const Ka="stat",Va="lstat";class za{constructor(e,u,n,s){this.fsw=s,this.path=e=e.replace(Ta,Eu),this.watchPath=u,this.fullWatchPath=v.resolve(u),this.hasGlob=u!==e,e===Eu&&(this.hasGlob=!1),this.globSymlink=this.hasGlob&&n?void 0:!1,this.globFilter=this.hasGlob?iu(e,void 0,hu):!1,this.dirParts=this.getDirParts(e),this.dirParts.forEach(r=>{r.length>1&&r.pop()}),this.followSymlinks=n,this.statMethod=n?Ka:Va}checkGlobSymlink(e){return this.globSymlink===void 0&&(this.globSymlink=e.fullParentDir===this.fullWatchPath?!1:{realPath:e.fullParentDir,linkPath:this.fullWatchPath}),this.globSymlink?e.fullPath.replace(this.globSymlink.realPath,this.globSymlink.linkPath):e.fullPath}entryPath(e){return v.join(this.watchPath,v.relative(this.watchPath,this.checkGlobSymlink(e)))}filterPath(e){const{stats:u}=e;if(u&&u.isSymbolicLink())return this.filterDir(e);const n=this.entryPath(e);return(this.hasGlob&&typeof this.globFilter===Pa?this.globFilter(n):!0)&&this.fsw._isntIgnored(n,u)&&this.fsw._hasReadPermissions(u)}getDirParts(e){if(!this.hasGlob)return[];const u=[];return(e.includes(Oa)?ga.expand(e):[e]).forEach(s=>{u.push(v.relative(this.watchPath,s).split(Sa))}),u}filterDir(e){if(this.hasGlob){const u=this.getDirParts(this.checkGlobSymlink(e));let n=!1;this.unmatchedGlob=!this.dirParts.some(s=>s.every((r,i)=>(r===Ha&&(n=!0),n||!u[0][i]||iu(r,u[0][i],hu))))}return!this.unmatchedGlob&&this.fsw._isntIgnored(this.entryPath(e),e.stats)}}class Ya extends pa{constructor(e){super();const u={};e&&Object.assign(u,e),this._watched=new Map,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._symlinkPaths=new Map,this._streams=new Set,this.closed=!1,q(u,"persistent")&&(u.persistent=!0),q(u,"ignoreInitial")&&(u.ignoreInitial=!1),q(u,"ignorePermissionErrors")&&(u.ignorePermissionErrors=!1),q(u,"interval")&&(u.interval=100),q(u,"binaryInterval")&&(u.binaryInterval=300),q(u,"disableGlobbing")&&(u.disableGlobbing=!1),u.enableBinaryInterval=u.binaryInterval!==u.interval,q(u,"useFsEvents")&&(u.useFsEvents=!u.usePolling),is.canUse()||(u.useFsEvents=!1),q(u,"usePolling")&&!u.useFsEvents&&(u.usePolling=ka),Ma&&(u.usePolling=!0);const s=process.env.CHOKIDAR_USEPOLLING;if(s!==void 0){const o=s.toLowerCase();o==="false"||o==="0"?u.usePolling=!1:o==="true"||o==="1"?u.usePolling=!0:u.usePolling=!!o}const r=process.env.CHOKIDAR_INTERVAL;r&&(u.interval=Number.parseInt(r,10)),q(u,"atomic")&&(u.atomic=!u.usePolling&&!u.useFsEvents),u.atomic&&(this._pendingUnlinks=new Map),q(u,"followSymlinks")&&(u.followSymlinks=!0),q(u,"awaitWriteFinish")&&(u.awaitWriteFinish=!1),u.awaitWriteFinish===!0&&(u.awaitWriteFinish={});const i=u.awaitWriteFinish;i&&(i.stabilityThreshold||(i.stabilityThreshold=2e3),i.pollInterval||(i.pollInterval=100),this._pendingWrites=new Map),u.ignored&&(u.ignored=pu(u.ignored));let D=0;this._emitReady=()=>{D++,D>=this._readyCount&&(this._emitReady=La,this._readyEmitted=!0,process.nextTick(()=>this.emit(Aa)))},this._emitRaw=(...o)=>this.emit(Ra,...o),this._readyEmitted=!1,this.options=u,u.useFsEvents?this._fsEventsHandler=new is(this):this._nodeFsHandler=new _a(this),Object.freeze(u)}add(e,u,n){const{cwd:s,disableGlobbing:r}=this.options;this.closed=!1;let i=cs(e);return s&&(i=i.map(D=>{const o=ja(D,s);return r||!Du(D)?o:ma(o)})),i=i.filter(D=>D.startsWith(cu)?(this._ignoredPaths.add(D.slice(1)),!1):(this._ignoredPaths.delete(D),this._ignoredPaths.delete(D+fu),this._userIgnored=void 0,!0)),this.options.useFsEvents&&this._fsEventsHandler?(this._readyCount||(this._readyCount=i.length),this.options.persistent&&(this._readyCount*=2),i.forEach(D=>this._fsEventsHandler._addToFsEvents(D))):(this._readyCount||(this._readyCount=0),this._readyCount+=i.length,Promise.all(i.map(async D=>{const o=await this._nodeFsHandler._addToNodeFs(D,!n,0,0,u);return o&&this._emitReady(),o})).then(D=>{this.closed||D.filter(o=>o).forEach(o=>{this.add(v.dirname(o),v.basename(u||o))})})),this}unwatch(e){if(this.closed)return this;const u=cs(e),{cwd:n}=this.options;return u.forEach(s=>{!v.isAbsolute(s)&&!this._closers.has(s)&&(n&&(s=v.join(n,s)),s=v.resolve(s)),this._closePath(s),this._ignoredPaths.add(s),this._watched.has(s)&&this._ignoredPaths.add(s+fu),this._userIgnored=void 0}),this}close(){if(this.closed)return this._closePromise;this.closed=!0,this.removeAllListeners();const e=[];return this._closers.forEach(u=>u.forEach(n=>{const s=n();s instanceof Promise&&e.push(s)})),this._streams.forEach(u=>u.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach(u=>u.dispose()),["closers","watched","streams","symlinkPaths","throttled"].forEach(u=>{this[`_${u}`].clear()}),this._closePromise=e.length?Promise.all(e).then(()=>{}):Promise.resolve(),this._closePromise}getWatched(){const e={};return this._watched.forEach((u,n)=>{const s=this.options.cwd?v.relative(this.options.cwd,n):n;e[s||as]=u.getChildren().sort()}),e}emitWithAll(e,u){this.emit(...u),e!==au&&this.emit(ou,...u)}async _emit(e,u,n,s,r){if(this.closed)return;const i=this.options;Ia&&(u=v.normalize(u)),i.cwd&&(u=v.relative(i.cwd,u));const D=[e,u];r!==void 0?D.push(n,s,r):s!==void 0?D.push(n,s):n!==void 0&&D.push(n);const o=i.awaitWriteFinish;let a;if(o&&(a=this._pendingWrites.get(u)))return a.lastChange=new Date,this;if(i.atomic){if(e===Ds)return this._pendingUnlinks.set(u,D),setTimeout(()=>{this._pendingUnlinks.forEach((c,f)=>{this.emit(...c),this.emit(ou,...c),this._pendingUnlinks.delete(f)})},typeof i.atomic=="number"?i.atomic:100),this;e===st&&this._pendingUnlinks.has(u)&&(e=D[0]=xe,this._pendingUnlinks.delete(u))}if(o&&(e===st||e===xe)&&this._readyEmitted){const c=(f,l)=>{f?(e=D[0]=au,D[1]=f,this.emitWithAll(e,D)):l&&(D.length>2?D[2]=l:D.push(l),this.emitWithAll(e,D))};return this._awaitWriteFinish(u,o.stabilityThreshold,e,c),this}if(e===xe&&!this._throttle(xe,u,50))return this;if(i.alwaysStat&&n===void 0&&(e===st||e===ya||e===xe)){const c=i.cwd?v.join(i.cwd,u):u;let f;try{f=await Wa(c)}catch{}if(!f||this.closed)return;D.push(f)}return this.emitWithAll(e,D),this}_handleError(e){const u=e&&e.code;return e&&u!=="ENOENT"&&u!=="ENOTDIR"&&(!this.options.ignorePermissionErrors||u!=="EPERM"&&u!=="EACCES")&&this.emit(au,e),e||this.closed}_throttle(e,u,n){this._throttled.has(e)||this._throttled.set(e,new Map);const s=this._throttled.get(e),r=s.get(u);if(r)return r.count++,!1;let i;const D=()=>{const a=s.get(u),c=a?a.count:0;return s.delete(u),clearTimeout(i),a&&clearTimeout(a.timeoutObject),c};i=setTimeout(D,n);const o={timeoutObject:i,clear:D,count:0};return s.set(u,o),o}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(e,u,n,s){let r,i=e;this.options.cwd&&!v.isAbsolute(e)&&(i=v.join(this.options.cwd,e));const D=new Date,o=a=>{ru.stat(i,(c,f)=>{if(c||!this._pendingWrites.has(e)){c&&c.code!=="ENOENT"&&s(c);return}const l=Number(new Date);a&&f.size!==a.size&&(this._pendingWrites.get(e).lastChange=l);const p=this._pendingWrites.get(e);l-p.lastChange>=u?(this._pendingWrites.delete(e),s(void 0,f)):r=setTimeout(o,this.options.awaitWriteFinish.pollInterval,f)})};this._pendingWrites.has(e)||(this._pendingWrites.set(e,{lastChange:D,cancelWait:()=>(this._pendingWrites.delete(e),clearTimeout(r),n)}),r=setTimeout(o,this.options.awaitWriteFinish.pollInterval))}_getGlobIgnored(){return[...this._ignoredPaths.values()]}_isIgnored(e,u){if(this.options.atomic&&$a.test(e))return!0;if(!this._userIgnored){const{cwd:n}=this.options,s=this.options.ignored,r=s&&s.map(ds(n)),i=pu(r).filter(o=>typeof o===du&&!Du(o)).map(o=>o+fu),D=this._getGlobIgnored().map(ds(n)).concat(r,i);this._userIgnored=iu(D,void 0,hu)}return this._userIgnored([e,u])}_isntIgnored(e,u){return!this._isIgnored(e,u)}_getWatchHelpers(e,u){const n=u||this.options.disableGlobbing||!Du(e)?e:Fa(e),s=this.options.followSymlinks;return new za(e,n,s,this)}_getWatchedDir(e){this._boundRemove||(this._boundRemove=this._remove.bind(this));const u=v.resolve(e);return this._watched.has(u)||this._watched.set(u,new Ua(u,this._boundRemove)),this._watched.get(u)}_hasReadPermissions(e){if(this.options.ignorePermissionErrors)return!0;const n=(e&&Number.parseInt(e.mode,10))&511,s=Number.parseInt(n.toString(8)[0],10);return Boolean(4&s)}_remove(e,u,n){const s=v.join(e,u),r=v.resolve(s);if(n=n!=null?n:this._watched.has(s)||this._watched.has(r),!this._throttle("remove",s,100))return;!n&&!this.options.useFsEvents&&this._watched.size===1&&this.add(e,u,!0),this._getWatchedDir(s).getChildren().forEach(l=>this._remove(s,l));const o=this._getWatchedDir(e),a=o.has(u);o.remove(u),this._symlinkPaths.has(r)&&this._symlinkPaths.delete(r);let c=s;if(this.options.cwd&&(c=v.relative(this.options.cwd,s)),this.options.awaitWriteFinish&&this._pendingWrites.has(c)&&this._pendingWrites.get(c).cancelWait()===st)return;this._watched.delete(s),this._watched.delete(r);const f=n?wa:Ds;a&&!this._isIgnored(s)&&this._emit(f,s),this.options.useFsEvents||this._closePath(s)}_closePath(e){this._closeFile(e);const u=v.dirname(e);this._getWatchedDir(u).remove(v.basename(e))}_closeFile(e){const u=this._closers.get(e);!u||(u.forEach(n=>n()),this._closers.delete(e))}_addPathCloser(e,u){if(!u)return;let n=this._closers.get(e);n||(n=[],this._closers.set(e,n)),n.push(u)}_readdirp(e,u){if(this.closed)return;const n={type:ou,alwaysStat:!0,lstat:!0,...u};let s=Ca(e,n);return this._streams.add(s),s.once(ba,()=>{s=void 0}),s.once(va,()=>{s&&(this._streams.delete(s),s=void 0)}),s}}const qa=(t,e)=>{const u=new Ya(e);return u.add(t),u};var Xa=qa;const Cu=(t=!0)=>{let e=!1;return u=>{if(e||u==="unknown-flag")return!0;if(u==="argument")return e=!0,t}};function Es(t,e=process.argv.slice(2)){return mu(t,e,{ignore:Cu()}),e}let ce=!0;const ge=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let ps=0;if(ge.process&&ge.process.env&&ge.process.stdout){const{FORCE_COLOR:t,NODE_DISABLE_COLORS:e,TERM:u}=ge.process.env;e||t==="0"?ce=!1:t==="1"?ce=!0:u==="dumb"?ce=!1:"CI"in ge.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(n=>n in ge.process.env)?ce=!0:ce=process.stdout.isTTY,ce&&(ps=u&&u.endsWith("-256color")?2:1)}let Cs={enabled:ce,supportLevel:ps};function Fs(t,e,u=1){const n=`\x1B[${t}m`,s=`\x1B[${e}m`,r=new RegExp(`\\x1b\\[${e}m`,"g");return i=>Cs.enabled&&Cs.supportLevel>=u?n+(""+i).replace(r,n)+s:""+i}const Qa=Fs(90,39),Za=Fs(96,39),Ja=()=>new Date().toLocaleTimeString(),el=(...t)=>console.log(Qa(Ja()),Za("[tsx]"),...t),tl="\x1Bc";function ul(t,e){let u;return()=>{u&&clearTimeout(u),u=setTimeout(()=>t(),e)}}function nl(t){return t&&typeof t=="object"&&t.type==="dependency"}const gs={noCache:{type:Boolean,description:"Disable caching",default:!1},tsconfig:{type:String,description:"Custom tsconfig.json path"},clearScreen:{type:Boolean,description:"Clearing the screen on rerun",default:!0},ignore:{type:[String],description:"Paths & globs to exclude from being watched"}},sl=qr({name:"watch",parameters:["<script path>"],flags:gs,help:{description:"Run the script and watch for changes"},ignoreArgv:Cu(!1)},t=>{const e=Es(gs,process.argv.slice(3)),u={noCache:t.flags.noCache,tsconfigPath:t.flags.tsconfig,clearScreen:t.flags.clearScreen,ignore:t.flags.ignore,ipc:!0};let n;const s=ul(()=>{n&&!n.killed&&n.exitCode===null&&n.kill(),n&&el("rerunning"),u.clearScreen&&process.stdout.write(tl),n=tn(e,u),n.on("message",o=>{if(nl(o)){const a=o.path.startsWith("file:")?bs(o.path):o.path;K.isAbsolute(a)&&D.add(a)}})},100);s();function r(o){process.exit(128+Bs.signals[o])}function i(o){n&&n.exitCode===null?(n.on("close",()=>r(o)),n.kill(o)):r(o)}process.once("SIGINT",i),process.once("SIGTERM",i);const D=Xa(t._,{cwd:process.cwd(),ignoreInitial:!0,ignored:["**/.*/**","**/.*","**/{node_modules,bower_components,vendor}/**",...u.ignore],ignorePermissionErrors:!0}).on("all",s);process.stdin.on("data",s)}),ms={noCache:{type:Boolean,description:"Disable caching"},tsconfig:{type:String,description:"Custom tsconfig.json path"}};Yr({name:"tsx",parameters:["[script path]"],commands:[sl],flags:{...ms,version:{type:Boolean,alias:"v",description:"Show version"},help:{type:Boolean,alias:"h",description:"Show help"}},help:!1,ignoreArgv:Cu()},t=>{t.flags.version?process.stdout.write(`tsx v${ws}
+`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"};const uo=jt,{MAX_LENGTH:Un,CHAR_BACKSLASH:zt,CHAR_BACKTICK:no,CHAR_COMMA:so,CHAR_DOT:ro,CHAR_LEFT_PARENTHESES:io,CHAR_RIGHT_PARENTHESES:Do,CHAR_LEFT_CURLY_BRACE:oo,CHAR_RIGHT_CURLY_BRACE:ao,CHAR_LEFT_SQUARE_BRACKET:Kn,CHAR_RIGHT_SQUARE_BRACKET:Vn,CHAR_DOUBLE_QUOTE:lo,CHAR_SINGLE_QUOTE:co,CHAR_NO_BREAK_SPACE:fo,CHAR_ZERO_WIDTH_NOBREAK_SPACE:ho}=to,Eo=(t,e={})=>{if(typeof t!="string")throw new TypeError("Expected a string");let u=e||{},n=typeof u.maxLength=="number"?Math.min(Un,u.maxLength):Un;if(t.length>n)throw new SyntaxError(`Input length (${t.length}), exceeds max characters (${n})`);let s={type:"root",input:t,nodes:[]},r=[s],i=s,D=s,o=0,a=t.length,c=0,f=0,l;const p=()=>t[c++],C=F=>{if(F.type==="text"&&D.type==="dot"&&(D.type="text"),D&&D.type==="text"&&F.type==="text"){D.value+=F.value;return}return i.nodes.push(F),F.parent=i,F.prev=D,D=F,F};for(C({type:"bos"});c<a;)if(i=r[r.length-1],l=p(),!(l===ho||l===fo)){if(l===zt){C({type:"text",value:(e.keepEscaping?l:"")+p()});continue}if(l===Vn){C({type:"text",value:"\\"+l});continue}if(l===Kn){o++;let F;for(;c<a&&(F=p());){if(l+=F,F===Kn){o++;continue}if(F===zt){l+=p();continue}if(F===Vn&&(o--,o===0))break}C({type:"text",value:l});continue}if(l===io){i=C({type:"paren",nodes:[]}),r.push(i),C({type:"text",value:l});continue}if(l===Do){if(i.type!=="paren"){C({type:"text",value:l});continue}i=r.pop(),C({type:"text",value:l}),i=r[r.length-1];continue}if(l===lo||l===co||l===no){let F=l,A;for(e.keepQuotes!==!0&&(l="");c<a&&(A=p());){if(A===zt){l+=A+p();continue}if(A===F){e.keepQuotes===!0&&(l+=A);break}l+=A}C({type:"text",value:l});continue}if(l===oo){f++;let A={type:"brace",open:!0,close:!1,dollar:D.value&&D.value.slice(-1)==="$"||i.dollar===!0,depth:f,commas:0,ranges:0,nodes:[]};i=C(A),r.push(i),C({type:"open",value:l});continue}if(l===ao){if(i.type!=="brace"){C({type:"text",value:l});continue}let F="close";i=r.pop(),i.close=!0,C({type:F,value:l}),f--,i=r[r.length-1];continue}if(l===so&&f>0){if(i.ranges>0){i.ranges=0;let F=i.nodes.shift();i.nodes=[F,{type:"text",value:uo(i)}]}C({type:"comma",value:l}),i.commas++;continue}if(l===ro&&f>0&&i.commas===0){let F=i.nodes;if(f===0||F.length===0){C({type:"text",value:l});continue}if(D.type==="dot"){if(i.range=[],D.value+=l,D.type="range",i.nodes.length!==3&&i.nodes.length!==5){i.invalid=!0,i.ranges=0,D.type="text";continue}i.ranges++,i.args=[];continue}if(D.type==="range"){F.pop();let A=F[F.length-1];A.value+=D.value+l,D=A,i.ranges--;continue}C({type:"dot",value:l});continue}C({type:"text",value:l})}do if(i=r.pop(),i.type!=="root"){i.nodes.forEach(B=>{B.nodes||(B.type==="open"&&(B.isOpen=!0),B.type==="close"&&(B.isClose=!0),B.nodes||(B.type="text"),B.invalid=!0)});let F=r[r.length-1],A=F.nodes.indexOf(i);F.nodes.splice(A,1,...i.nodes)}while(r.length>0);return C({type:"eos"}),s};var po=Eo;const zn=jt,Co=QD,Fo=eo,go=po,Y=(t,e={})=>{let u=[];if(Array.isArray(t))for(let n of t){let s=Y.create(n,e);Array.isArray(s)?u.push(...s):u.push(s)}else u=[].concat(Y.create(t,e));return e&&e.expand===!0&&e.nodupes===!0&&(u=[...new Set(u)]),u};Y.parse=(t,e={})=>go(t,e),Y.stringify=(t,e={})=>zn(typeof t=="string"?Y.parse(t,e):t,e),Y.compile=(t,e={})=>(typeof t=="string"&&(t=Y.parse(t,e)),Co(t,e)),Y.expand=(t,e={})=>{typeof t=="string"&&(t=Y.parse(t,e));let u=Fo(t,e);return e.noempty===!0&&(u=u.filter(Boolean)),e.nodupes===!0&&(u=[...new Set(u)]),u},Y.create=(t,e={})=>t===""||t.length<3?[t]:e.expand!==!0?Y.compile(t,e):Y.expand(t,e);var mo=Y,Yn={exports:{}},_o=["3dm","3ds","3g2","3gp","7z","a","aac","adp","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"];(function(t){t.exports=_o})(Yn);const Ao=K,yo=Yn.exports,wo=new Set(yo);var Ro=t=>wo.has(Ao.extname(t).slice(1).toLowerCase()),Ze={};(function(t){const{sep:e}=K,{platform:u}=process,n=Fu;t.EV_ALL="all",t.EV_READY="ready",t.EV_ADD="add",t.EV_CHANGE="change",t.EV_ADD_DIR="addDir",t.EV_UNLINK="unlink",t.EV_UNLINK_DIR="unlinkDir",t.EV_RAW="raw",t.EV_ERROR="error",t.STR_DATA="data",t.STR_END="end",t.STR_CLOSE="close",t.FSEVENT_CREATED="created",t.FSEVENT_MODIFIED="modified",t.FSEVENT_DELETED="deleted",t.FSEVENT_MOVED="moved",t.FSEVENT_CLONED="cloned",t.FSEVENT_UNKNOWN="unknown",t.FSEVENT_TYPE_FILE="file",t.FSEVENT_TYPE_DIRECTORY="directory",t.FSEVENT_TYPE_SYMLINK="symlink",t.KEY_LISTENERS="listeners",t.KEY_ERR="errHandlers",t.KEY_RAW="rawEmitters",t.HANDLER_KEYS=[t.KEY_LISTENERS,t.KEY_ERR,t.KEY_RAW],t.DOT_SLASH=`.${e}`,t.BACK_SLASH_RE=/\\/g,t.DOUBLE_SLASH_RE=/\/\//,t.SLASH_OR_BACK_SLASH_RE=/[/\\]/,t.DOT_RE=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/,t.REPLACER_RE=/^\.[/\\]/,t.SLASH="/",t.SLASH_SLASH="//",t.BRACE_START="{",t.BANG="!",t.ONE_DOT=".",t.TWO_DOTS="..",t.STAR="*",t.GLOBSTAR="**",t.ROOT_GLOBSTAR="/**/*",t.SLASH_GLOBSTAR="/**",t.DIR_SUFFIX="Dir",t.ANYMATCH_OPTS={dot:!0},t.STRING_TYPE="string",t.FUNCTION_TYPE="function",t.EMPTY_STR="",t.EMPTY_FN=()=>{},t.IDENTITY_FN=s=>s,t.isWindows=u==="win32",t.isMacos=u==="darwin",t.isLinux=u==="linux",t.isIBMi=n.type()==="OS400"})(Ze);const ue=ie,L=K,{promisify:ve}=me,bo=Ro,{isWindows:vo,isLinux:Bo,EMPTY_FN:So,EMPTY_STR:$o,KEY_LISTENERS:Ce,KEY_ERR:Yt,KEY_RAW:Be,HANDLER_KEYS:To,EV_CHANGE:Je,EV_ADD:et,EV_ADD_DIR:xo,EV_ERROR:qn,STR_DATA:Oo,STR_END:No,BRACE_START:Ho,STAR:Po}=Ze,Lo="watch",Io=ve(ue.open),Xn=ve(ue.stat),ko=ve(ue.lstat),Mo=ve(ue.close),qt=ve(ue.realpath),Wo={lstat:ko,stat:Xn},Xt=(t,e)=>{t instanceof Set?t.forEach(e):e(t)},Se=(t,e,u)=>{let n=t[e];n instanceof Set||(t[e]=n=new Set([n])),n.add(u)},Go=t=>e=>{const u=t[e];u instanceof Set?u.clear():delete t[e]},$e=(t,e,u)=>{const n=t[e];n instanceof Set?n.delete(u):n===u&&delete t[e]},Qn=t=>t instanceof Set?t.size===0:!t,tt=new Map;function Zn(t,e,u,n,s){const r=(i,D)=>{u(t),s(i,D,{watchedPath:t}),D&&t!==D&&ut(L.resolve(t,D),Ce,L.join(t,D))};try{return ue.watch(t,e,r)}catch(i){n(i)}}const ut=(t,e,u,n,s)=>{const r=tt.get(t);!r||Xt(r[e],i=>{i(u,n,s)})},jo=(t,e,u,n)=>{const{listener:s,errHandler:r,rawEmitter:i}=n;let D=tt.get(e),o;if(!u.persistent)return o=Zn(t,u,s,r,i),o.close.bind(o);if(D)Se(D,Ce,s),Se(D,Yt,r),Se(D,Be,i);else{if(o=Zn(t,u,ut.bind(null,e,Ce),r,ut.bind(null,e,Be)),!o)return;o.on(qn,async a=>{const c=ut.bind(null,e,Yt);if(D.watcherUnusable=!0,vo&&a.code==="EPERM")try{const f=await Io(t,"r");await Mo(f),c(a)}catch{}else c(a)}),D={listeners:s,errHandlers:r,rawEmitters:i,watcher:o},tt.set(e,D)}return()=>{$e(D,Ce,s),$e(D,Yt,r),$e(D,Be,i),Qn(D.listeners)&&(D.watcher.close(),tt.delete(e),To.forEach(Go(D)),D.watcher=void 0,Object.freeze(D))}},Qt=new Map,Uo=(t,e,u,n)=>{const{listener:s,rawEmitter:r}=n;let i=Qt.get(e);const D=i&&i.options;return D&&(D.persistent<u.persistent||D.interval>u.interval)&&(i.listeners,i.rawEmitters,ue.unwatchFile(e),i=void 0),i?(Se(i,Ce,s),Se(i,Be,r)):(i={listeners:s,rawEmitters:r,options:u,watcher:ue.watchFile(e,u,(o,a)=>{Xt(i.rawEmitters,f=>{f(Je,e,{curr:o,prev:a})});const c=o.mtimeMs;(o.size!==a.size||c>a.mtimeMs||c===0)&&Xt(i.listeners,f=>f(t,o))})},Qt.set(e,i)),()=>{$e(i,Ce,s),$e(i,Be,r),Qn(i.listeners)&&(Qt.delete(e),ue.unwatchFile(e),i.options=i.watcher=void 0,Object.freeze(i))}};class Ko{constructor(e){this.fsw=e,this._boundHandleError=u=>e._handleError(u)}_watchWithNodeFs(e,u){const n=this.fsw.options,s=L.dirname(e),r=L.basename(e);this.fsw._getWatchedDir(s).add(r);const D=L.resolve(e),o={persistent:n.persistent};u||(u=So);let a;return n.usePolling?(o.interval=n.enableBinaryInterval&&bo(r)?n.binaryInterval:n.interval,a=Uo(e,D,o,{listener:u,rawEmitter:this.fsw._emitRaw})):a=jo(e,D,o,{listener:u,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw}),a}_handleFile(e,u,n){if(this.fsw.closed)return;const s=L.dirname(e),r=L.basename(e),i=this.fsw._getWatchedDir(s);let D=u;if(i.has(r))return;const o=async(c,f)=>{if(!!this.fsw._throttle(Lo,e,5)){if(!f||f.mtimeMs===0)try{const l=await Xn(e);if(this.fsw.closed)return;const p=l.atimeMs,C=l.mtimeMs;(!p||p<=C||C!==D.mtimeMs)&&this.fsw._emit(Je,e,l),Bo&&D.ino!==l.ino?(this.fsw._closeFile(c),D=l,this.fsw._addPathCloser(c,this._watchWithNodeFs(e,o))):D=l}catch{this.fsw._remove(s,r)}else if(i.has(r)){const l=f.atimeMs,p=f.mtimeMs;(!l||l<=p||p!==D.mtimeMs)&&this.fsw._emit(Je,e,f),D=f}}},a=this._watchWithNodeFs(e,o);if(!(n&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(e)){if(!this.fsw._throttle(et,e,0))return;this.fsw._emit(et,e,u)}return a}async _handleSymlink(e,u,n,s){if(this.fsw.closed)return;const r=e.fullPath,i=this.fsw._getWatchedDir(u);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let D;try{D=await qt(n)}catch{return this.fsw._emitReady(),!0}return this.fsw.closed?void 0:(i.has(s)?this.fsw._symlinkPaths.get(r)!==D&&(this.fsw._symlinkPaths.set(r,D),this.fsw._emit(Je,n,e.stats)):(i.add(s),this.fsw._symlinkPaths.set(r,D),this.fsw._emit(et,n,e.stats)),this.fsw._emitReady(),!0)}if(this.fsw._symlinkPaths.has(r))return!0;this.fsw._symlinkPaths.set(r,!0)}_handleRead(e,u,n,s,r,i,D){if(e=L.join(e,$o),!n.hasGlob&&(D=this.fsw._throttle("readdir",e,1e3),!D))return;const o=this.fsw._getWatchedDir(n.path),a=new Set;let c=this.fsw._readdirp(e,{fileFilter:f=>n.filterPath(f),directoryFilter:f=>n.filterDir(f),depth:0}).on(Oo,async f=>{if(this.fsw.closed){c=void 0;return}const l=f.path;let p=L.join(e,l);if(a.add(l),!(f.stats.isSymbolicLink()&&await this._handleSymlink(f,e,p,l))){if(this.fsw.closed){c=void 0;return}(l===s||!s&&!o.has(l))&&(this.fsw._incrReadyCount(),p=L.join(r,L.relative(r,p)),this._addToNodeFs(p,u,n,i+1))}}).on(qn,this._boundHandleError);return new Promise(f=>c.once(No,()=>{if(this.fsw.closed){c=void 0;return}const l=D?D.clear():!1;f(),o.getChildren().filter(p=>p!==e&&!a.has(p)&&(!n.hasGlob||n.filterPath({fullPath:L.resolve(e,p)}))).forEach(p=>{this.fsw._remove(e,p)}),c=void 0,l&&this._handleRead(e,!1,n,s,r,i,D)}))}async _handleDir(e,u,n,s,r,i,D){const o=this.fsw._getWatchedDir(L.dirname(e)),a=o.has(L.basename(e));!(n&&this.fsw.options.ignoreInitial)&&!r&&!a&&(!i.hasGlob||i.globFilter(e))&&this.fsw._emit(xo,e,u),o.add(L.basename(e)),this.fsw._getWatchedDir(e);let c,f;const l=this.fsw.options.depth;if((l==null||s<=l)&&!this.fsw._symlinkPaths.has(D)){if(!r&&(await this._handleRead(e,n,i,r,e,s,c),this.fsw.closed))return;f=this._watchWithNodeFs(e,(p,C)=>{C&&C.mtimeMs===0||this._handleRead(p,!1,i,r,e,s,c)})}return f}async _addToNodeFs(e,u,n,s,r){const i=this.fsw._emitReady;if(this.fsw._isIgnored(e)||this.fsw.closed)return i(),!1;const D=this.fsw._getWatchHelpers(e,s);!D.hasGlob&&n&&(D.hasGlob=n.hasGlob,D.globFilter=n.globFilter,D.filterPath=o=>n.filterPath(o),D.filterDir=o=>n.filterDir(o));try{const o=await Wo[D.statMethod](D.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(D.watchPath,o))return i(),!1;const a=this.fsw.options.followSymlinks&&!e.includes(Po)&&!e.includes(Ho);let c;if(o.isDirectory()){const f=L.resolve(e),l=a?await qt(e):e;if(this.fsw.closed||(c=await this._handleDir(D.watchPath,o,u,s,r,D,l),this.fsw.closed))return;f!==l&&l!==void 0&&this.fsw._symlinkPaths.set(f,l)}else if(o.isSymbolicLink()){const f=a?await qt(e):e;if(this.fsw.closed)return;const l=L.dirname(D.watchPath);if(this.fsw._getWatchedDir(l).add(D.watchPath),this.fsw._emit(et,D.watchPath,o),c=await this._handleDir(l,o,u,s,e,D,f),this.fsw.closed)return;f!==void 0&&this.fsw._symlinkPaths.set(L.resolve(e),f)}else c=this._handleFile(D.watchPath,o,u);return i(),this.fsw._addPathCloser(e,c),!1}catch(o){if(this.fsw._handleError(o))return i(),e}}}var Vo=Ko,Zt={exports:{}};const Jt=ie,I=K,{promisify:eu}=me;let Fe;try{Fe=Dt("fsevents")}catch(t){process.env.CHOKIDAR_PRINT_FSEVENTS_REQUIRE_ERROR&&console.error(t)}if(Fe){const t=process.version.match(/v(\d+)\.(\d+)/);if(t&&t[1]&&t[2]){const e=Number.parseInt(t[1],10),u=Number.parseInt(t[2],10);e===8&&u<16&&(Fe=void 0)}}const{EV_ADD:tu,EV_CHANGE:zo,EV_ADD_DIR:Jn,EV_UNLINK:nt,EV_ERROR:Yo,STR_DATA:qo,STR_END:Xo,FSEVENT_CREATED:Qo,FSEVENT_MODIFIED:Zo,FSEVENT_DELETED:Jo,FSEVENT_MOVED:ea,FSEVENT_UNKNOWN:ta,FSEVENT_TYPE_FILE:ua,FSEVENT_TYPE_DIRECTORY:Te,FSEVENT_TYPE_SYMLINK:es,ROOT_GLOBSTAR:ts,DIR_SUFFIX:na,DOT_SLASH:us,FUNCTION_TYPE:uu,EMPTY_FN:sa,IDENTITY_FN:ra}=Ze,ia=t=>isNaN(t)?{}:{depth:t},nu=eu(Jt.stat),Da=eu(Jt.lstat),ns=eu(Jt.realpath),oa={stat:nu,lstat:Da},le=new Map,aa=10,la=new Set([69888,70400,71424,72704,73472,131328,131840,262912]),ca=(t,e)=>({stop:Fe.watch(t,e)});function fa(t,e,u,n){let s=I.extname(e)?I.dirname(e):e;const r=I.dirname(s);let i=le.get(s);ha(r)&&(s=r);const D=I.resolve(t),o=D!==e,a=(f,l,p)=>{o&&(f=f.replace(e,D)),(f===D||!f.indexOf(D+I.sep))&&u(f,l,p)};let c=!1;for(const f of le.keys())if(e.indexOf(I.resolve(f)+I.sep)===0){s=f,i=le.get(s),c=!0;break}return i||c?i.listeners.add(a):(i={listeners:new Set([a]),rawEmitter:n,watcher:ca(s,(f,l)=>{if(!i.listeners.size)return;const p=Fe.getInfo(f,l);i.listeners.forEach(C=>{C(f,l,p)}),i.rawEmitter(p.event,f,p)})},le.set(s,i)),()=>{const f=i.listeners;if(f.delete(a),!f.size&&(le.delete(s),i.watcher))return i.watcher.stop().then(()=>{i.rawEmitter=i.watcher=void 0,Object.freeze(i)})}}const ha=t=>{let e=0;for(const u of le.keys())if(u.indexOf(t)===0&&(e++,e>=aa))return!0;return!1},da=()=>Fe&&le.size<128,su=(t,e)=>{let u=0;for(;!t.indexOf(e)&&(t=I.dirname(t))!==e;)u++;return u},ss=(t,e)=>t.type===Te&&e.isDirectory()||t.type===es&&e.isSymbolicLink()||t.type===ua&&e.isFile();class Ea{constructor(e){this.fsw=e}checkIgnored(e,u){const n=this.fsw._ignoredPaths;if(this.fsw._isIgnored(e,u))return n.add(e),u&&u.isDirectory()&&n.add(e+ts),!0;n.delete(e),n.delete(e+ts)}addOrChange(e,u,n,s,r,i,D,o){const a=r.has(i)?zo:tu;this.handleEvent(a,e,u,n,s,r,i,D,o)}async checkExists(e,u,n,s,r,i,D,o){try{const a=await nu(e);if(this.fsw.closed)return;ss(D,a)?this.addOrChange(e,u,n,s,r,i,D,o):this.handleEvent(nt,e,u,n,s,r,i,D,o)}catch(a){a.code==="EACCES"?this.addOrChange(e,u,n,s,r,i,D,o):this.handleEvent(nt,e,u,n,s,r,i,D,o)}}handleEvent(e,u,n,s,r,i,D,o,a){if(!(this.fsw.closed||this.checkIgnored(u)))if(e===nt){const c=o.type===Te;(c||i.has(D))&&this.fsw._remove(r,D,c)}else{if(e===tu){if(o.type===Te&&this.fsw._getWatchedDir(u),o.type===es&&a.followSymlinks){const f=a.depth===void 0?void 0:su(n,s)+1;return this._addToFsEvents(u,!1,!0,f)}this.fsw._getWatchedDir(r).add(D)}const c=o.type===Te?e+na:e;this.fsw._emit(c,u),c===Jn&&this._addToFsEvents(u,!1,!0)}}_watchWithFsEvents(e,u,n,s){if(this.fsw.closed||this.fsw._isIgnored(e))return;const r=this.fsw.options,D=fa(e,u,async(o,a,c)=>{if(this.fsw.closed||r.depth!==void 0&&su(o,u)>r.depth)return;const f=n(I.join(e,I.relative(e,o)));if(s&&!s(f))return;const l=I.dirname(f),p=I.basename(f),C=this.fsw._getWatchedDir(c.type===Te?f:l);if(la.has(a)||c.event===ta)if(typeof r.ignored===uu){let F;try{F=await nu(f)}catch{}if(this.fsw.closed||this.checkIgnored(f,F))return;ss(c,F)?this.addOrChange(f,o,u,l,C,p,c,r):this.handleEvent(nt,f,o,u,l,C,p,c,r)}else this.checkExists(f,o,u,l,C,p,c,r);else switch(c.event){case Qo:case Zo:return this.addOrChange(f,o,u,l,C,p,c,r);case Jo:case ea:return this.checkExists(f,o,u,l,C,p,c,r)}},this.fsw._emitRaw);return this.fsw._emitReady(),D}async _handleFsEventsSymlink(e,u,n,s){if(!(this.fsw.closed||this.fsw._symlinkPaths.has(u))){this.fsw._symlinkPaths.set(u,!0),this.fsw._incrReadyCount();try{const r=await ns(e);if(this.fsw.closed)return;if(this.fsw._isIgnored(r))return this.fsw._emitReady();this.fsw._incrReadyCount(),this._addToFsEvents(r||e,i=>{let D=e;return r&&r!==us?D=i.replace(r,e):i!==us&&(D=I.join(e,i)),n(D)},!1,s)}catch(r){if(this.fsw._handleError(r))return this.fsw._emitReady()}}}emitAdd(e,u,n,s,r){const i=n(e),D=u.isDirectory(),o=this.fsw._getWatchedDir(I.dirname(i)),a=I.basename(i);D&&this.fsw._getWatchedDir(i),!o.has(a)&&(o.add(a),(!s.ignoreInitial||r===!0)&&this.fsw._emit(D?Jn:tu,i,u))}initWatch(e,u,n,s){if(this.fsw.closed)return;const r=this._watchWithFsEvents(n.watchPath,I.resolve(e||n.watchPath),s,n.globFilter);this.fsw._addPathCloser(u,r)}async _addToFsEvents(e,u,n,s){if(this.fsw.closed)return;const r=this.fsw.options,i=typeof u===uu?u:ra,D=this.fsw._getWatchHelpers(e);try{const o=await oa[D.statMethod](D.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(D.watchPath,o))throw null;if(o.isDirectory()){if(D.globFilter||this.emitAdd(i(e),o,i,r,n),s&&s>r.depth)return;this.fsw._readdirp(D.watchPath,{fileFilter:a=>D.filterPath(a),directoryFilter:a=>D.filterDir(a),...ia(r.depth-(s||0))}).on(qo,a=>{if(this.fsw.closed||a.stats.isDirectory()&&!D.filterPath(a))return;const c=I.join(D.watchPath,a.path),{fullPath:f}=a;if(D.followSymlinks&&a.stats.isSymbolicLink()){const l=r.depth===void 0?void 0:su(c,I.resolve(D.watchPath))+1;this._handleFsEventsSymlink(c,f,i,l)}else this.emitAdd(c,a.stats,i,r,n)}).on(Yo,sa).on(Xo,()=>{this.fsw._emitReady()})}else this.emitAdd(D.watchPath,o,i,r,n),this.fsw._emitReady()}catch(o){(!o||this.fsw._handleError(o))&&(this.fsw._emitReady(),this.fsw._emitReady())}if(r.persistent&&n!==!0)if(typeof u===uu)this.initWatch(void 0,e,D,i);else{let o;try{o=await ns(D.watchPath)}catch{}this.initWatch(o,e,D,i)}}}Zt.exports=Ea,Zt.exports.canUse=da;const{EventEmitter:pa}=Ss,ru=ie,v=K,{promisify:rs}=me,Ca=ED,iu=Mt.exports.default,Fa=TD,Du=Rn,ga=mo,ma=mn,_a=Vo,is=Zt.exports,{EV_ALL:ou,EV_READY:Aa,EV_ADD:st,EV_CHANGE:xe,EV_UNLINK:Ds,EV_ADD_DIR:ya,EV_UNLINK_DIR:wa,EV_RAW:Ra,EV_ERROR:au,STR_CLOSE:ba,STR_END:va,BACK_SLASH_RE:Ba,DOUBLE_SLASH_RE:os,SLASH_OR_BACK_SLASH_RE:Sa,DOT_RE:$a,REPLACER_RE:Ta,SLASH:lu,SLASH_SLASH:xa,BRACE_START:Oa,BANG:cu,ONE_DOT:as,TWO_DOTS:Na,GLOBSTAR:Ha,SLASH_GLOBSTAR:fu,ANYMATCH_OPTS:hu,STRING_TYPE:du,FUNCTION_TYPE:Pa,EMPTY_STR:Eu,EMPTY_FN:La,isWindows:Ia,isMacos:ka,isIBMi:Ma}=Ze,Wa=rs(ru.stat),Ga=rs(ru.readdir),pu=(t=[])=>Array.isArray(t)?t:[t],ls=(t,e=[])=>(t.forEach(u=>{Array.isArray(u)?ls(u,e):e.push(u)}),e),cs=t=>{const e=ls(pu(t));if(!e.every(u=>typeof u===du))throw new TypeError(`Non-string provided as watch path: ${e}`);return e.map(hs)},fs=t=>{let e=t.replace(Ba,lu),u=!1;for(e.startsWith(xa)&&(u=!0);e.match(os);)e=e.replace(os,lu);return u&&(e=lu+e),e},hs=t=>fs(v.normalize(fs(t))),ds=(t=Eu)=>e=>typeof e!==du?e:hs(v.isAbsolute(e)?e:v.join(t,e)),ja=(t,e)=>v.isAbsolute(t)?t:t.startsWith(cu)?cu+v.join(e,t.slice(1)):v.join(e,t),q=(t,e)=>t[e]===void 0;class Ua{constructor(e,u){this.path=e,this._removeWatcher=u,this.items=new Set}add(e){const{items:u}=this;!u||e!==as&&e!==Na&&u.add(e)}async remove(e){const{items:u}=this;if(!u||(u.delete(e),u.size>0))return;const n=this.path;try{await Ga(n)}catch{this._removeWatcher&&this._removeWatcher(v.dirname(n),v.basename(n))}}has(e){const{items:u}=this;if(!!u)return u.has(e)}getChildren(){const{items:e}=this;if(!!e)return[...e.values()]}dispose(){this.items.clear(),delete this.path,delete this._removeWatcher,delete this.items,Object.freeze(this)}}const Ka="stat",Va="lstat";class za{constructor(e,u,n,s){this.fsw=s,this.path=e=e.replace(Ta,Eu),this.watchPath=u,this.fullWatchPath=v.resolve(u),this.hasGlob=u!==e,e===Eu&&(this.hasGlob=!1),this.globSymlink=this.hasGlob&&n?void 0:!1,this.globFilter=this.hasGlob?iu(e,void 0,hu):!1,this.dirParts=this.getDirParts(e),this.dirParts.forEach(r=>{r.length>1&&r.pop()}),this.followSymlinks=n,this.statMethod=n?Ka:Va}checkGlobSymlink(e){return this.globSymlink===void 0&&(this.globSymlink=e.fullParentDir===this.fullWatchPath?!1:{realPath:e.fullParentDir,linkPath:this.fullWatchPath}),this.globSymlink?e.fullPath.replace(this.globSymlink.realPath,this.globSymlink.linkPath):e.fullPath}entryPath(e){return v.join(this.watchPath,v.relative(this.watchPath,this.checkGlobSymlink(e)))}filterPath(e){const{stats:u}=e;if(u&&u.isSymbolicLink())return this.filterDir(e);const n=this.entryPath(e);return(this.hasGlob&&typeof this.globFilter===Pa?this.globFilter(n):!0)&&this.fsw._isntIgnored(n,u)&&this.fsw._hasReadPermissions(u)}getDirParts(e){if(!this.hasGlob)return[];const u=[];return(e.includes(Oa)?ga.expand(e):[e]).forEach(s=>{u.push(v.relative(this.watchPath,s).split(Sa))}),u}filterDir(e){if(this.hasGlob){const u=this.getDirParts(this.checkGlobSymlink(e));let n=!1;this.unmatchedGlob=!this.dirParts.some(s=>s.every((r,i)=>(r===Ha&&(n=!0),n||!u[0][i]||iu(r,u[0][i],hu))))}return!this.unmatchedGlob&&this.fsw._isntIgnored(this.entryPath(e),e.stats)}}class Ya extends pa{constructor(e){super();const u={};e&&Object.assign(u,e),this._watched=new Map,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._symlinkPaths=new Map,this._streams=new Set,this.closed=!1,q(u,"persistent")&&(u.persistent=!0),q(u,"ignoreInitial")&&(u.ignoreInitial=!1),q(u,"ignorePermissionErrors")&&(u.ignorePermissionErrors=!1),q(u,"interval")&&(u.interval=100),q(u,"binaryInterval")&&(u.binaryInterval=300),q(u,"disableGlobbing")&&(u.disableGlobbing=!1),u.enableBinaryInterval=u.binaryInterval!==u.interval,q(u,"useFsEvents")&&(u.useFsEvents=!u.usePolling),is.canUse()||(u.useFsEvents=!1),q(u,"usePolling")&&!u.useFsEvents&&(u.usePolling=ka),Ma&&(u.usePolling=!0);const s=process.env.CHOKIDAR_USEPOLLING;if(s!==void 0){const o=s.toLowerCase();o==="false"||o==="0"?u.usePolling=!1:o==="true"||o==="1"?u.usePolling=!0:u.usePolling=!!o}const r=process.env.CHOKIDAR_INTERVAL;r&&(u.interval=Number.parseInt(r,10)),q(u,"atomic")&&(u.atomic=!u.usePolling&&!u.useFsEvents),u.atomic&&(this._pendingUnlinks=new Map),q(u,"followSymlinks")&&(u.followSymlinks=!0),q(u,"awaitWriteFinish")&&(u.awaitWriteFinish=!1),u.awaitWriteFinish===!0&&(u.awaitWriteFinish={});const i=u.awaitWriteFinish;i&&(i.stabilityThreshold||(i.stabilityThreshold=2e3),i.pollInterval||(i.pollInterval=100),this._pendingWrites=new Map),u.ignored&&(u.ignored=pu(u.ignored));let D=0;this._emitReady=()=>{D++,D>=this._readyCount&&(this._emitReady=La,this._readyEmitted=!0,process.nextTick(()=>this.emit(Aa)))},this._emitRaw=(...o)=>this.emit(Ra,...o),this._readyEmitted=!1,this.options=u,u.useFsEvents?this._fsEventsHandler=new is(this):this._nodeFsHandler=new _a(this),Object.freeze(u)}add(e,u,n){const{cwd:s,disableGlobbing:r}=this.options;this.closed=!1;let i=cs(e);return s&&(i=i.map(D=>{const o=ja(D,s);return r||!Du(D)?o:ma(o)})),i=i.filter(D=>D.startsWith(cu)?(this._ignoredPaths.add(D.slice(1)),!1):(this._ignoredPaths.delete(D),this._ignoredPaths.delete(D+fu),this._userIgnored=void 0,!0)),this.options.useFsEvents&&this._fsEventsHandler?(this._readyCount||(this._readyCount=i.length),this.options.persistent&&(this._readyCount*=2),i.forEach(D=>this._fsEventsHandler._addToFsEvents(D))):(this._readyCount||(this._readyCount=0),this._readyCount+=i.length,Promise.all(i.map(async D=>{const o=await this._nodeFsHandler._addToNodeFs(D,!n,0,0,u);return o&&this._emitReady(),o})).then(D=>{this.closed||D.filter(o=>o).forEach(o=>{this.add(v.dirname(o),v.basename(u||o))})})),this}unwatch(e){if(this.closed)return this;const u=cs(e),{cwd:n}=this.options;return u.forEach(s=>{!v.isAbsolute(s)&&!this._closers.has(s)&&(n&&(s=v.join(n,s)),s=v.resolve(s)),this._closePath(s),this._ignoredPaths.add(s),this._watched.has(s)&&this._ignoredPaths.add(s+fu),this._userIgnored=void 0}),this}close(){if(this.closed)return this._closePromise;this.closed=!0,this.removeAllListeners();const e=[];return this._closers.forEach(u=>u.forEach(n=>{const s=n();s instanceof Promise&&e.push(s)})),this._streams.forEach(u=>u.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach(u=>u.dispose()),["closers","watched","streams","symlinkPaths","throttled"].forEach(u=>{this[`_${u}`].clear()}),this._closePromise=e.length?Promise.all(e).then(()=>{}):Promise.resolve(),this._closePromise}getWatched(){const e={};return this._watched.forEach((u,n)=>{const s=this.options.cwd?v.relative(this.options.cwd,n):n;e[s||as]=u.getChildren().sort()}),e}emitWithAll(e,u){this.emit(...u),e!==au&&this.emit(ou,...u)}async _emit(e,u,n,s,r){if(this.closed)return;const i=this.options;Ia&&(u=v.normalize(u)),i.cwd&&(u=v.relative(i.cwd,u));const D=[e,u];r!==void 0?D.push(n,s,r):s!==void 0?D.push(n,s):n!==void 0&&D.push(n);const o=i.awaitWriteFinish;let a;if(o&&(a=this._pendingWrites.get(u)))return a.lastChange=new Date,this;if(i.atomic){if(e===Ds)return this._pendingUnlinks.set(u,D),setTimeout(()=>{this._pendingUnlinks.forEach((c,f)=>{this.emit(...c),this.emit(ou,...c),this._pendingUnlinks.delete(f)})},typeof i.atomic=="number"?i.atomic:100),this;e===st&&this._pendingUnlinks.has(u)&&(e=D[0]=xe,this._pendingUnlinks.delete(u))}if(o&&(e===st||e===xe)&&this._readyEmitted){const c=(f,l)=>{f?(e=D[0]=au,D[1]=f,this.emitWithAll(e,D)):l&&(D.length>2?D[2]=l:D.push(l),this.emitWithAll(e,D))};return this._awaitWriteFinish(u,o.stabilityThreshold,e,c),this}if(e===xe&&!this._throttle(xe,u,50))return this;if(i.alwaysStat&&n===void 0&&(e===st||e===ya||e===xe)){const c=i.cwd?v.join(i.cwd,u):u;let f;try{f=await Wa(c)}catch{}if(!f||this.closed)return;D.push(f)}return this.emitWithAll(e,D),this}_handleError(e){const u=e&&e.code;return e&&u!=="ENOENT"&&u!=="ENOTDIR"&&(!this.options.ignorePermissionErrors||u!=="EPERM"&&u!=="EACCES")&&this.emit(au,e),e||this.closed}_throttle(e,u,n){this._throttled.has(e)||this._throttled.set(e,new Map);const s=this._throttled.get(e),r=s.get(u);if(r)return r.count++,!1;let i;const D=()=>{const a=s.get(u),c=a?a.count:0;return s.delete(u),clearTimeout(i),a&&clearTimeout(a.timeoutObject),c};i=setTimeout(D,n);const o={timeoutObject:i,clear:D,count:0};return s.set(u,o),o}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(e,u,n,s){let r,i=e;this.options.cwd&&!v.isAbsolute(e)&&(i=v.join(this.options.cwd,e));const D=new Date,o=a=>{ru.stat(i,(c,f)=>{if(c||!this._pendingWrites.has(e)){c&&c.code!=="ENOENT"&&s(c);return}const l=Number(new Date);a&&f.size!==a.size&&(this._pendingWrites.get(e).lastChange=l);const p=this._pendingWrites.get(e);l-p.lastChange>=u?(this._pendingWrites.delete(e),s(void 0,f)):r=setTimeout(o,this.options.awaitWriteFinish.pollInterval,f)})};this._pendingWrites.has(e)||(this._pendingWrites.set(e,{lastChange:D,cancelWait:()=>(this._pendingWrites.delete(e),clearTimeout(r),n)}),r=setTimeout(o,this.options.awaitWriteFinish.pollInterval))}_getGlobIgnored(){return[...this._ignoredPaths.values()]}_isIgnored(e,u){if(this.options.atomic&&$a.test(e))return!0;if(!this._userIgnored){const{cwd:n}=this.options,s=this.options.ignored,r=s&&s.map(ds(n)),i=pu(r).filter(o=>typeof o===du&&!Du(o)).map(o=>o+fu),D=this._getGlobIgnored().map(ds(n)).concat(r,i);this._userIgnored=iu(D,void 0,hu)}return this._userIgnored([e,u])}_isntIgnored(e,u){return!this._isIgnored(e,u)}_getWatchHelpers(e,u){const n=u||this.options.disableGlobbing||!Du(e)?e:Fa(e),s=this.options.followSymlinks;return new za(e,n,s,this)}_getWatchedDir(e){this._boundRemove||(this._boundRemove=this._remove.bind(this));const u=v.resolve(e);return this._watched.has(u)||this._watched.set(u,new Ua(u,this._boundRemove)),this._watched.get(u)}_hasReadPermissions(e){if(this.options.ignorePermissionErrors)return!0;const n=(e&&Number.parseInt(e.mode,10))&511,s=Number.parseInt(n.toString(8)[0],10);return Boolean(4&s)}_remove(e,u,n){const s=v.join(e,u),r=v.resolve(s);if(n=n!=null?n:this._watched.has(s)||this._watched.has(r),!this._throttle("remove",s,100))return;!n&&!this.options.useFsEvents&&this._watched.size===1&&this.add(e,u,!0),this._getWatchedDir(s).getChildren().forEach(l=>this._remove(s,l));const o=this._getWatchedDir(e),a=o.has(u);o.remove(u),this._symlinkPaths.has(r)&&this._symlinkPaths.delete(r);let c=s;if(this.options.cwd&&(c=v.relative(this.options.cwd,s)),this.options.awaitWriteFinish&&this._pendingWrites.has(c)&&this._pendingWrites.get(c).cancelWait()===st)return;this._watched.delete(s),this._watched.delete(r);const f=n?wa:Ds;a&&!this._isIgnored(s)&&this._emit(f,s),this.options.useFsEvents||this._closePath(s)}_closePath(e){this._closeFile(e);const u=v.dirname(e);this._getWatchedDir(u).remove(v.basename(e))}_closeFile(e){const u=this._closers.get(e);!u||(u.forEach(n=>n()),this._closers.delete(e))}_addPathCloser(e,u){if(!u)return;let n=this._closers.get(e);n||(n=[],this._closers.set(e,n)),n.push(u)}_readdirp(e,u){if(this.closed)return;const n={type:ou,alwaysStat:!0,lstat:!0,...u};let s=Ca(e,n);return this._streams.add(s),s.once(ba,()=>{s=void 0}),s.once(va,()=>{s&&(this._streams.delete(s),s=void 0)}),s}}const qa=(t,e)=>{const u=new Ya(e);return u.add(t),u};var Xa=qa;const Cu=(t=!0)=>{let e=!1;return u=>{if(e||u==="unknown-flag")return!0;if(u==="argument")return e=!0,t}};function Es(t,e=process.argv.slice(2)){return mu(t,e,{ignore:Cu()}),e}let ce=!0;const ge=typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{};let ps=0;if(ge.process&&ge.process.env&&ge.process.stdout){const{FORCE_COLOR:t,NODE_DISABLE_COLORS:e,TERM:u}=ge.process.env;e||t==="0"?ce=!1:t==="1"?ce=!0:u==="dumb"?ce=!1:"CI"in ge.process.env&&["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some(n=>n in ge.process.env)?ce=!0:ce=process.stdout.isTTY,ce&&(ps=u&&u.endsWith("-256color")?2:1)}let Cs={enabled:ce,supportLevel:ps};function Fs(t,e,u=1){const n=`\x1B[${t}m`,s=`\x1B[${e}m`,r=new RegExp(`\\x1b\\[${e}m`,"g");return i=>Cs.enabled&&Cs.supportLevel>=u?n+(""+i).replace(r,n)+s:""+i}const Qa=Fs(90,39),Za=Fs(96,39),Ja=()=>"watcher: " + new Date().toISOString(),el=(...t)=>console.log(Qa(Ja()),Za("[tsx]"),...t),tl="\x1Bc";function ul(t,e){let u;return()=>{u&&clearTimeout(u),u=setTimeout(()=>t(),e)}}function nl(t){return t&&typeof t=="object"&&t.type==="dependency"}const gs={noCache:{type:Boolean,description:"Disable caching",default:!1},tsconfig:{type:String,description:"Custom tsconfig.json path"},clearScreen:{type:Boolean,description:"Clearing the screen on rerun",default:!0},ignore:{type:[String],description:"Paths & globs to exclude from being watched"}},sl=qr({name:"watch",parameters:["<script path>"],flags:gs,help:{description:"Run the script and watch for changes"},ignoreArgv:Cu(!1)},t=>{const e=Es(gs,process.argv.slice(3)),u={noCache:t.flags.noCache,tsconfigPath:t.flags.tsconfig,clearScreen:t.flags.clearScreen,ignore:t.flags.ignore,ipc:!0};let n;const s=ul(()=>{n&&!n.killed&&n.exitCode===null&&n.kill(),n&&el("rerunning"),u.clearScreen&&process.stdout.write(tl),n=tn(e,u),n.on("message",o=>{if(nl(o)){const a=o.path.startsWith("file:")?bs(o.path):o.path;K.isAbsolute(a)&&D.add(a)}})},100);s();function r(o){process.exit(128+Bs.signals[o])}function i(o){n&&n.exitCode===null?(n.on("close",()=>r(o)),n.kill(o)):r(o)}process.once("SIGINT",i),process.once("SIGTERM",i);const D=Xa(t._,{cwd:process.cwd(),ignoreInitial:!0,ignored:["**/.*/**","**/.*","**/{node_modules,bower_components,vendor}/**",...u.ignore],ignorePermissionErrors:!0}).on("all",s);process.stdin.on("data",s)}),ms={noCache:{type:Boolean,description:"Disable caching"},tsconfig:{type:String,description:"Custom tsconfig.json path"}};Yr({name:"tsx",parameters:["[script path]"],commands:[sl],flags:{...ms,version:{type:Boolean,alias:"v",description:"Show version"},help:{type:Boolean,alias:"h",description:"Show help"}},help:!1,ignoreArgv:Cu()},t=>{t.flags.version?process.stdout.write(`tsx v${ws}
 node `):t.flags.help&&(t.showHelp({description:"Node.js runtime enhanced with esbuild for loading TypeScript & ESM"}),console.log(`${"-".repeat(45)}
 `));const e=tn(Es(ms),{noCache:Boolean(t.flags.noCache),tsconfigPath:t.flags.tsconfig}),u=async n=>{await Promise.race([new Promise(r=>{function i(D){D&&D.type==="kill"&&(r(D.signal),e.off("message",i))}e.on("message",i)}),new Promise(r=>{setTimeout(r,10)})])||e.kill(n)};process.on("SIGINT",u),process.on("SIGTERM",u),e.on("close",n=>process.exit(n))});
